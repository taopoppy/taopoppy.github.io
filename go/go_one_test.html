<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Go测试和性能调优 | TaoPoppy</title>
    <meta name="description" content="陶振川">
    <link rel="icon" href="/meta.png">
    
    <link rel="preload" href="/assets/css/0.styles.32e41c9b.css" as="style"><link rel="preload" href="/assets/js/app.1a394514.js" as="script"><link rel="preload" href="/assets/js/2.8304a06b.js" as="script"><link rel="preload" href="/assets/js/140.a6685c82.js" as="script"><link rel="prefetch" href="/assets/js/10.7aef26de.js"><link rel="prefetch" href="/assets/js/100.b6a5dbe3.js"><link rel="prefetch" href="/assets/js/101.4cf14517.js"><link rel="prefetch" href="/assets/js/102.a10509c8.js"><link rel="prefetch" href="/assets/js/103.725c83f9.js"><link rel="prefetch" href="/assets/js/104.4cf52e25.js"><link rel="prefetch" href="/assets/js/105.fa93d42c.js"><link rel="prefetch" href="/assets/js/106.bc4f6131.js"><link rel="prefetch" href="/assets/js/107.720518ec.js"><link rel="prefetch" href="/assets/js/108.73134973.js"><link rel="prefetch" href="/assets/js/109.074b05fb.js"><link rel="prefetch" href="/assets/js/11.0781fb51.js"><link rel="prefetch" href="/assets/js/110.fa287650.js"><link rel="prefetch" href="/assets/js/111.66cf0003.js"><link rel="prefetch" href="/assets/js/112.ec18ad13.js"><link rel="prefetch" href="/assets/js/113.45a7c13a.js"><link rel="prefetch" href="/assets/js/114.8ac723f2.js"><link rel="prefetch" href="/assets/js/115.519d8940.js"><link rel="prefetch" href="/assets/js/116.c52bde55.js"><link rel="prefetch" href="/assets/js/117.35c583ff.js"><link rel="prefetch" href="/assets/js/118.6b209cf4.js"><link rel="prefetch" href="/assets/js/119.a3bd3fcb.js"><link rel="prefetch" href="/assets/js/12.75f1c153.js"><link rel="prefetch" href="/assets/js/120.45c18f2c.js"><link rel="prefetch" href="/assets/js/121.f1335403.js"><link rel="prefetch" href="/assets/js/122.4ddc6efe.js"><link rel="prefetch" href="/assets/js/123.3fedcfb9.js"><link rel="prefetch" href="/assets/js/124.57c3d5fd.js"><link rel="prefetch" href="/assets/js/125.98bb56f7.js"><link rel="prefetch" href="/assets/js/126.b4e3e7bc.js"><link rel="prefetch" href="/assets/js/127.aa4e7f95.js"><link rel="prefetch" href="/assets/js/128.08be9111.js"><link rel="prefetch" href="/assets/js/129.c32609eb.js"><link rel="prefetch" href="/assets/js/13.a3141dde.js"><link rel="prefetch" href="/assets/js/130.a0c93b04.js"><link rel="prefetch" href="/assets/js/131.dfae9fea.js"><link rel="prefetch" href="/assets/js/132.74845e19.js"><link rel="prefetch" href="/assets/js/133.cb7fc263.js"><link rel="prefetch" href="/assets/js/134.f9ae184c.js"><link rel="prefetch" href="/assets/js/135.273e7372.js"><link rel="prefetch" href="/assets/js/136.1da93b8e.js"><link rel="prefetch" href="/assets/js/137.198dbe16.js"><link rel="prefetch" href="/assets/js/138.64fac690.js"><link rel="prefetch" href="/assets/js/139.ac7f9fdf.js"><link rel="prefetch" href="/assets/js/14.023d10f2.js"><link rel="prefetch" href="/assets/js/141.96f04b23.js"><link rel="prefetch" href="/assets/js/142.cc5f5520.js"><link rel="prefetch" href="/assets/js/143.9b28c5f0.js"><link rel="prefetch" href="/assets/js/144.b0527ead.js"><link rel="prefetch" href="/assets/js/145.dad8d1ad.js"><link rel="prefetch" href="/assets/js/146.37619b4e.js"><link rel="prefetch" href="/assets/js/147.51353321.js"><link rel="prefetch" href="/assets/js/148.b7dbbadc.js"><link rel="prefetch" href="/assets/js/149.01c189f9.js"><link rel="prefetch" href="/assets/js/15.1ead8c76.js"><link rel="prefetch" href="/assets/js/150.6999137d.js"><link rel="prefetch" href="/assets/js/151.36a45175.js"><link rel="prefetch" href="/assets/js/152.f4c8c0a3.js"><link rel="prefetch" href="/assets/js/153.f04f1cfa.js"><link rel="prefetch" href="/assets/js/154.11f667b0.js"><link rel="prefetch" href="/assets/js/155.3df246f1.js"><link rel="prefetch" href="/assets/js/156.95c2a81f.js"><link rel="prefetch" href="/assets/js/157.4c4e453a.js"><link rel="prefetch" href="/assets/js/158.ea143735.js"><link rel="prefetch" href="/assets/js/159.1851c143.js"><link rel="prefetch" href="/assets/js/16.588b8a18.js"><link rel="prefetch" href="/assets/js/160.8623fd27.js"><link rel="prefetch" href="/assets/js/161.9f3dde39.js"><link rel="prefetch" href="/assets/js/162.ec8ada30.js"><link rel="prefetch" href="/assets/js/163.578cd511.js"><link rel="prefetch" href="/assets/js/164.5f326c38.js"><link rel="prefetch" href="/assets/js/165.d6055e4f.js"><link rel="prefetch" href="/assets/js/166.a4b38932.js"><link rel="prefetch" href="/assets/js/167.6a25e6a6.js"><link rel="prefetch" href="/assets/js/168.11291db9.js"><link rel="prefetch" href="/assets/js/169.3a6aec97.js"><link rel="prefetch" href="/assets/js/17.dbb0117f.js"><link rel="prefetch" href="/assets/js/170.c1b92e05.js"><link rel="prefetch" href="/assets/js/171.f06cccdb.js"><link rel="prefetch" href="/assets/js/172.26661658.js"><link rel="prefetch" href="/assets/js/173.ce718757.js"><link rel="prefetch" href="/assets/js/174.425859ee.js"><link rel="prefetch" href="/assets/js/175.b334be38.js"><link rel="prefetch" href="/assets/js/176.d29c1ef4.js"><link rel="prefetch" href="/assets/js/177.61e20b4a.js"><link rel="prefetch" href="/assets/js/178.f79fe9c5.js"><link rel="prefetch" href="/assets/js/179.8ab2f01b.js"><link rel="prefetch" href="/assets/js/18.5178d2f1.js"><link rel="prefetch" href="/assets/js/180.e1f584e7.js"><link rel="prefetch" href="/assets/js/181.384f8b65.js"><link rel="prefetch" href="/assets/js/182.675d4534.js"><link rel="prefetch" href="/assets/js/183.a5314419.js"><link rel="prefetch" href="/assets/js/184.49a4f95b.js"><link rel="prefetch" href="/assets/js/185.39566276.js"><link rel="prefetch" href="/assets/js/186.faf772f8.js"><link rel="prefetch" href="/assets/js/187.5e40a002.js"><link rel="prefetch" href="/assets/js/188.e9a85c75.js"><link rel="prefetch" href="/assets/js/189.4f6300fd.js"><link rel="prefetch" href="/assets/js/19.a3a8a3b2.js"><link rel="prefetch" href="/assets/js/190.5395a82d.js"><link rel="prefetch" href="/assets/js/191.c37e69d9.js"><link rel="prefetch" href="/assets/js/192.49c5336c.js"><link rel="prefetch" href="/assets/js/193.8358c1f7.js"><link rel="prefetch" href="/assets/js/194.f3baad75.js"><link rel="prefetch" href="/assets/js/195.9b64acde.js"><link rel="prefetch" href="/assets/js/196.af79cfd2.js"><link rel="prefetch" href="/assets/js/197.83502b3c.js"><link rel="prefetch" href="/assets/js/198.79a30060.js"><link rel="prefetch" href="/assets/js/199.4a4580d8.js"><link rel="prefetch" href="/assets/js/20.f7956ee9.js"><link rel="prefetch" href="/assets/js/200.ea5edefe.js"><link rel="prefetch" href="/assets/js/201.ba9f6baf.js"><link rel="prefetch" href="/assets/js/202.a684e81a.js"><link rel="prefetch" href="/assets/js/203.f6ae36b1.js"><link rel="prefetch" href="/assets/js/204.1b7d15f6.js"><link rel="prefetch" href="/assets/js/205.886aa300.js"><link rel="prefetch" href="/assets/js/206.4c920afb.js"><link rel="prefetch" href="/assets/js/207.84ff34f5.js"><link rel="prefetch" href="/assets/js/208.869b1786.js"><link rel="prefetch" href="/assets/js/209.46e7bcd8.js"><link rel="prefetch" href="/assets/js/21.a7419b80.js"><link rel="prefetch" href="/assets/js/210.8ae86200.js"><link rel="prefetch" href="/assets/js/211.8f174712.js"><link rel="prefetch" href="/assets/js/212.13a1cfde.js"><link rel="prefetch" href="/assets/js/213.2623c8b3.js"><link rel="prefetch" href="/assets/js/214.5f6c13ce.js"><link rel="prefetch" href="/assets/js/215.239ee6c0.js"><link rel="prefetch" href="/assets/js/216.bb2ce7ff.js"><link rel="prefetch" href="/assets/js/217.0708a1bc.js"><link rel="prefetch" href="/assets/js/218.9b44a3a0.js"><link rel="prefetch" href="/assets/js/219.872ef7dc.js"><link rel="prefetch" href="/assets/js/22.c95b31e3.js"><link rel="prefetch" href="/assets/js/220.d16ceb67.js"><link rel="prefetch" href="/assets/js/221.405b655a.js"><link rel="prefetch" href="/assets/js/222.fcbd0075.js"><link rel="prefetch" href="/assets/js/223.e48f31f2.js"><link rel="prefetch" href="/assets/js/224.f5562fa5.js"><link rel="prefetch" href="/assets/js/225.4c58f939.js"><link rel="prefetch" href="/assets/js/226.84e6ccf6.js"><link rel="prefetch" href="/assets/js/227.307e3114.js"><link rel="prefetch" href="/assets/js/228.f4bc2989.js"><link rel="prefetch" href="/assets/js/229.96ea2ba2.js"><link rel="prefetch" href="/assets/js/23.a75f3ddc.js"><link rel="prefetch" href="/assets/js/230.2ae85257.js"><link rel="prefetch" href="/assets/js/231.78d7510d.js"><link rel="prefetch" href="/assets/js/232.f5bf4f67.js"><link rel="prefetch" href="/assets/js/233.9102fdaa.js"><link rel="prefetch" href="/assets/js/234.a9e5e11a.js"><link rel="prefetch" href="/assets/js/235.71426295.js"><link rel="prefetch" href="/assets/js/236.03474465.js"><link rel="prefetch" href="/assets/js/237.48aed7b3.js"><link rel="prefetch" href="/assets/js/238.6a271b50.js"><link rel="prefetch" href="/assets/js/239.28d2a86b.js"><link rel="prefetch" href="/assets/js/24.84641855.js"><link rel="prefetch" href="/assets/js/240.22bca10d.js"><link rel="prefetch" href="/assets/js/241.2a279198.js"><link rel="prefetch" href="/assets/js/242.43b24484.js"><link rel="prefetch" href="/assets/js/243.fe9d5ea9.js"><link rel="prefetch" href="/assets/js/244.d39e950f.js"><link rel="prefetch" href="/assets/js/245.64db6d12.js"><link rel="prefetch" href="/assets/js/246.5b1f1745.js"><link rel="prefetch" href="/assets/js/247.d1ab0e2b.js"><link rel="prefetch" href="/assets/js/248.a19e36bd.js"><link rel="prefetch" href="/assets/js/249.3aa723c7.js"><link rel="prefetch" href="/assets/js/25.73570942.js"><link rel="prefetch" href="/assets/js/250.0f968bec.js"><link rel="prefetch" href="/assets/js/251.9ade3872.js"><link rel="prefetch" href="/assets/js/252.72e1aa12.js"><link rel="prefetch" href="/assets/js/253.374cc99e.js"><link rel="prefetch" href="/assets/js/254.44800bf9.js"><link rel="prefetch" href="/assets/js/255.06241cb8.js"><link rel="prefetch" href="/assets/js/256.bbeaafaa.js"><link rel="prefetch" href="/assets/js/257.14e8b661.js"><link rel="prefetch" href="/assets/js/258.0913e120.js"><link rel="prefetch" href="/assets/js/259.32bd3bf9.js"><link rel="prefetch" href="/assets/js/26.9a79c041.js"><link rel="prefetch" href="/assets/js/260.e5a40c02.js"><link rel="prefetch" href="/assets/js/261.4c8be7b1.js"><link rel="prefetch" href="/assets/js/262.0663f55e.js"><link rel="prefetch" href="/assets/js/263.cecc1123.js"><link rel="prefetch" href="/assets/js/264.d2209296.js"><link rel="prefetch" href="/assets/js/265.497bc01b.js"><link rel="prefetch" href="/assets/js/266.769ac5e0.js"><link rel="prefetch" href="/assets/js/267.6b97962f.js"><link rel="prefetch" href="/assets/js/268.fa6635c8.js"><link rel="prefetch" href="/assets/js/269.c1e74469.js"><link rel="prefetch" href="/assets/js/27.0dd62438.js"><link rel="prefetch" href="/assets/js/270.4e8f8d77.js"><link rel="prefetch" href="/assets/js/271.f27f2f56.js"><link rel="prefetch" href="/assets/js/272.d1349876.js"><link rel="prefetch" href="/assets/js/273.e967ea79.js"><link rel="prefetch" href="/assets/js/274.7c9df4ce.js"><link rel="prefetch" href="/assets/js/275.5b85e62c.js"><link rel="prefetch" href="/assets/js/276.c09ef549.js"><link rel="prefetch" href="/assets/js/277.58b59a93.js"><link rel="prefetch" href="/assets/js/278.e91f9b01.js"><link rel="prefetch" href="/assets/js/279.3159509a.js"><link rel="prefetch" href="/assets/js/28.685ccac3.js"><link rel="prefetch" href="/assets/js/280.8878bc0d.js"><link rel="prefetch" href="/assets/js/281.c7e08ecb.js"><link rel="prefetch" href="/assets/js/282.85066f7c.js"><link rel="prefetch" href="/assets/js/283.80120ef1.js"><link rel="prefetch" href="/assets/js/284.1f719606.js"><link rel="prefetch" href="/assets/js/285.b4a3cea5.js"><link rel="prefetch" href="/assets/js/286.2ebd0b34.js"><link rel="prefetch" href="/assets/js/287.8e141966.js"><link rel="prefetch" href="/assets/js/288.ea2f74f5.js"><link rel="prefetch" href="/assets/js/289.beba8c8e.js"><link rel="prefetch" href="/assets/js/29.d9a2cd59.js"><link rel="prefetch" href="/assets/js/290.fd587ae1.js"><link rel="prefetch" href="/assets/js/291.e0b87667.js"><link rel="prefetch" href="/assets/js/292.d86d8fa2.js"><link rel="prefetch" href="/assets/js/293.f176a900.js"><link rel="prefetch" href="/assets/js/294.536a81c8.js"><link rel="prefetch" href="/assets/js/295.54f88831.js"><link rel="prefetch" href="/assets/js/296.7c5ad5dd.js"><link rel="prefetch" href="/assets/js/297.cf9a4601.js"><link rel="prefetch" href="/assets/js/298.a844a174.js"><link rel="prefetch" href="/assets/js/299.809942fc.js"><link rel="prefetch" href="/assets/js/3.5dd59f66.js"><link rel="prefetch" href="/assets/js/30.1ca80117.js"><link rel="prefetch" href="/assets/js/300.bc9809ff.js"><link rel="prefetch" href="/assets/js/301.d677b5b5.js"><link rel="prefetch" href="/assets/js/302.aa40279f.js"><link rel="prefetch" href="/assets/js/303.070e632e.js"><link rel="prefetch" href="/assets/js/304.3d695df8.js"><link rel="prefetch" href="/assets/js/305.44e261e9.js"><link rel="prefetch" href="/assets/js/306.e2f7ad64.js"><link rel="prefetch" href="/assets/js/307.83982154.js"><link rel="prefetch" href="/assets/js/308.4db5bbe7.js"><link rel="prefetch" href="/assets/js/309.3aa975c1.js"><link rel="prefetch" href="/assets/js/31.440aa4c9.js"><link rel="prefetch" href="/assets/js/310.614e3c2f.js"><link rel="prefetch" href="/assets/js/311.ebda45a9.js"><link rel="prefetch" href="/assets/js/312.52cdf585.js"><link rel="prefetch" href="/assets/js/313.1f984642.js"><link rel="prefetch" href="/assets/js/314.fd4722eb.js"><link rel="prefetch" href="/assets/js/315.14d7045f.js"><link rel="prefetch" href="/assets/js/316.8f4cc226.js"><link rel="prefetch" href="/assets/js/317.21630e12.js"><link rel="prefetch" href="/assets/js/318.9a5c960e.js"><link rel="prefetch" href="/assets/js/319.06f7dacf.js"><link rel="prefetch" href="/assets/js/32.27f34442.js"><link rel="prefetch" href="/assets/js/320.e426fea5.js"><link rel="prefetch" href="/assets/js/321.46a426b9.js"><link rel="prefetch" href="/assets/js/322.7256b9c8.js"><link rel="prefetch" href="/assets/js/323.5b848b7f.js"><link rel="prefetch" href="/assets/js/324.e8eedaac.js"><link rel="prefetch" href="/assets/js/325.54947978.js"><link rel="prefetch" href="/assets/js/326.03bfd5b9.js"><link rel="prefetch" href="/assets/js/327.34a2ec4d.js"><link rel="prefetch" href="/assets/js/328.4e023633.js"><link rel="prefetch" href="/assets/js/329.b218e68f.js"><link rel="prefetch" href="/assets/js/33.f6658b03.js"><link rel="prefetch" href="/assets/js/330.a8a2750a.js"><link rel="prefetch" href="/assets/js/331.0df9ca3a.js"><link rel="prefetch" href="/assets/js/332.95c19161.js"><link rel="prefetch" href="/assets/js/333.c6e765b9.js"><link rel="prefetch" href="/assets/js/334.c79e3b52.js"><link rel="prefetch" href="/assets/js/335.49fcd3ab.js"><link rel="prefetch" href="/assets/js/336.5c2ccd1d.js"><link rel="prefetch" href="/assets/js/337.fd6692e6.js"><link rel="prefetch" href="/assets/js/338.e0f59f10.js"><link rel="prefetch" href="/assets/js/339.04196614.js"><link rel="prefetch" href="/assets/js/34.17b5b881.js"><link rel="prefetch" href="/assets/js/340.05e21d65.js"><link rel="prefetch" href="/assets/js/341.15ff2a62.js"><link rel="prefetch" href="/assets/js/342.ae7694ad.js"><link rel="prefetch" href="/assets/js/343.f4a5186c.js"><link rel="prefetch" href="/assets/js/344.4caf3fa0.js"><link rel="prefetch" href="/assets/js/345.214e2189.js"><link rel="prefetch" href="/assets/js/346.f613921f.js"><link rel="prefetch" href="/assets/js/347.626136bf.js"><link rel="prefetch" href="/assets/js/348.cf4b86a4.js"><link rel="prefetch" href="/assets/js/349.2a62c487.js"><link rel="prefetch" href="/assets/js/35.e99d5a01.js"><link rel="prefetch" href="/assets/js/350.389648a3.js"><link rel="prefetch" href="/assets/js/351.81305cad.js"><link rel="prefetch" href="/assets/js/352.d7a80ffa.js"><link rel="prefetch" href="/assets/js/353.0929bd7f.js"><link rel="prefetch" href="/assets/js/354.87d7184c.js"><link rel="prefetch" href="/assets/js/355.1dd69433.js"><link rel="prefetch" href="/assets/js/356.b969449b.js"><link rel="prefetch" href="/assets/js/357.16cecac1.js"><link rel="prefetch" href="/assets/js/358.ef6c9df0.js"><link rel="prefetch" href="/assets/js/359.8b33b863.js"><link rel="prefetch" href="/assets/js/36.8e7e289a.js"><link rel="prefetch" href="/assets/js/360.089cc7ad.js"><link rel="prefetch" href="/assets/js/361.9a59c5c5.js"><link rel="prefetch" href="/assets/js/362.a8026d31.js"><link rel="prefetch" href="/assets/js/363.c3bb2718.js"><link rel="prefetch" href="/assets/js/364.62014d33.js"><link rel="prefetch" href="/assets/js/365.00a229da.js"><link rel="prefetch" href="/assets/js/366.5c57901c.js"><link rel="prefetch" href="/assets/js/367.ad1d6755.js"><link rel="prefetch" href="/assets/js/368.64dc7bec.js"><link rel="prefetch" href="/assets/js/369.406cd3d7.js"><link rel="prefetch" href="/assets/js/37.4f733baf.js"><link rel="prefetch" href="/assets/js/370.750f2303.js"><link rel="prefetch" href="/assets/js/371.6cc0e13d.js"><link rel="prefetch" href="/assets/js/372.ed729131.js"><link rel="prefetch" href="/assets/js/373.c369c4c9.js"><link rel="prefetch" href="/assets/js/374.d3a57fb2.js"><link rel="prefetch" href="/assets/js/375.21d68193.js"><link rel="prefetch" href="/assets/js/376.25d9d5f3.js"><link rel="prefetch" href="/assets/js/377.c7ebd0c2.js"><link rel="prefetch" href="/assets/js/378.c733ec30.js"><link rel="prefetch" href="/assets/js/379.d6cf1c34.js"><link rel="prefetch" href="/assets/js/38.86de11d5.js"><link rel="prefetch" href="/assets/js/380.9abd3090.js"><link rel="prefetch" href="/assets/js/381.1fc3ec03.js"><link rel="prefetch" href="/assets/js/382.d0d2e795.js"><link rel="prefetch" href="/assets/js/383.bd308361.js"><link rel="prefetch" href="/assets/js/384.c2a5969a.js"><link rel="prefetch" href="/assets/js/385.20c11f56.js"><link rel="prefetch" href="/assets/js/386.631b9af2.js"><link rel="prefetch" href="/assets/js/387.8f59e0b5.js"><link rel="prefetch" href="/assets/js/388.5b1951cd.js"><link rel="prefetch" href="/assets/js/389.2e942f96.js"><link rel="prefetch" href="/assets/js/39.153b6ec6.js"><link rel="prefetch" href="/assets/js/390.341a807c.js"><link rel="prefetch" href="/assets/js/391.c9bd676c.js"><link rel="prefetch" href="/assets/js/392.ac05ebea.js"><link rel="prefetch" href="/assets/js/393.6989a857.js"><link rel="prefetch" href="/assets/js/394.744402ae.js"><link rel="prefetch" href="/assets/js/395.a0636831.js"><link rel="prefetch" href="/assets/js/396.9e92309a.js"><link rel="prefetch" href="/assets/js/397.867afb5d.js"><link rel="prefetch" href="/assets/js/398.261fe9bc.js"><link rel="prefetch" href="/assets/js/399.83573ac7.js"><link rel="prefetch" href="/assets/js/4.1b11a2b1.js"><link rel="prefetch" href="/assets/js/40.77cd485e.js"><link rel="prefetch" href="/assets/js/400.333909ad.js"><link rel="prefetch" href="/assets/js/401.9c9ae0ae.js"><link rel="prefetch" href="/assets/js/402.50b49502.js"><link rel="prefetch" href="/assets/js/403.c0d1aa14.js"><link rel="prefetch" href="/assets/js/404.24e4f5ba.js"><link rel="prefetch" href="/assets/js/405.09e8422c.js"><link rel="prefetch" href="/assets/js/406.1e91805d.js"><link rel="prefetch" href="/assets/js/407.2393ac65.js"><link rel="prefetch" href="/assets/js/408.e0df89f7.js"><link rel="prefetch" href="/assets/js/409.58e7dc26.js"><link rel="prefetch" href="/assets/js/41.67fda662.js"><link rel="prefetch" href="/assets/js/410.e9c06b6a.js"><link rel="prefetch" href="/assets/js/411.bbe28a09.js"><link rel="prefetch" href="/assets/js/412.44a068c9.js"><link rel="prefetch" href="/assets/js/413.b76704b3.js"><link rel="prefetch" href="/assets/js/414.32590ba0.js"><link rel="prefetch" href="/assets/js/415.60884e6d.js"><link rel="prefetch" href="/assets/js/416.119019d8.js"><link rel="prefetch" href="/assets/js/417.277cf86c.js"><link rel="prefetch" href="/assets/js/418.fb313fbc.js"><link rel="prefetch" href="/assets/js/419.3eba15ec.js"><link rel="prefetch" href="/assets/js/42.7e56f2cd.js"><link rel="prefetch" href="/assets/js/420.c6d3f2a0.js"><link rel="prefetch" href="/assets/js/421.0939406a.js"><link rel="prefetch" href="/assets/js/422.f9975cec.js"><link rel="prefetch" href="/assets/js/423.fb455c5f.js"><link rel="prefetch" href="/assets/js/424.01dea30b.js"><link rel="prefetch" href="/assets/js/425.ae78c193.js"><link rel="prefetch" href="/assets/js/426.01ffc131.js"><link rel="prefetch" href="/assets/js/427.ca692320.js"><link rel="prefetch" href="/assets/js/428.db29a47a.js"><link rel="prefetch" href="/assets/js/429.954aaaf1.js"><link rel="prefetch" href="/assets/js/43.d0246dae.js"><link rel="prefetch" href="/assets/js/430.b2c8abce.js"><link rel="prefetch" href="/assets/js/431.238123f0.js"><link rel="prefetch" href="/assets/js/432.459a70b6.js"><link rel="prefetch" href="/assets/js/433.ec112349.js"><link rel="prefetch" href="/assets/js/434.d11bf56d.js"><link rel="prefetch" href="/assets/js/435.98d79cdc.js"><link rel="prefetch" href="/assets/js/436.78b0e462.js"><link rel="prefetch" href="/assets/js/437.17bafd8b.js"><link rel="prefetch" href="/assets/js/438.462d1929.js"><link rel="prefetch" href="/assets/js/439.1f5c292d.js"><link rel="prefetch" href="/assets/js/44.eb3d088f.js"><link rel="prefetch" href="/assets/js/440.b139dc54.js"><link rel="prefetch" href="/assets/js/441.2fae1d62.js"><link rel="prefetch" href="/assets/js/45.39adc1d2.js"><link rel="prefetch" href="/assets/js/46.93061422.js"><link rel="prefetch" href="/assets/js/47.0dc9e596.js"><link rel="prefetch" href="/assets/js/48.68f070d6.js"><link rel="prefetch" href="/assets/js/49.a29d9572.js"><link rel="prefetch" href="/assets/js/5.37e3a575.js"><link rel="prefetch" href="/assets/js/50.0b46a629.js"><link rel="prefetch" href="/assets/js/51.c7712d08.js"><link rel="prefetch" href="/assets/js/52.8fdf333b.js"><link rel="prefetch" href="/assets/js/53.1e5f8a94.js"><link rel="prefetch" href="/assets/js/54.41216d39.js"><link rel="prefetch" href="/assets/js/55.34d14bf4.js"><link rel="prefetch" href="/assets/js/56.b7d3b6ca.js"><link rel="prefetch" href="/assets/js/57.9646b246.js"><link rel="prefetch" href="/assets/js/58.5446709c.js"><link rel="prefetch" href="/assets/js/59.0fac1fa2.js"><link rel="prefetch" href="/assets/js/6.41004de5.js"><link rel="prefetch" href="/assets/js/60.8a2d1be8.js"><link rel="prefetch" href="/assets/js/61.77eca8ce.js"><link rel="prefetch" href="/assets/js/62.277c8f17.js"><link rel="prefetch" href="/assets/js/63.8b203bb2.js"><link rel="prefetch" href="/assets/js/64.d466d2b9.js"><link rel="prefetch" href="/assets/js/65.7c4cb8d5.js"><link rel="prefetch" href="/assets/js/66.71b38fe1.js"><link rel="prefetch" href="/assets/js/67.e0b107a2.js"><link rel="prefetch" href="/assets/js/68.7d64bb4b.js"><link rel="prefetch" href="/assets/js/69.9cdbcfeb.js"><link rel="prefetch" href="/assets/js/7.67d94aac.js"><link rel="prefetch" href="/assets/js/70.eb1c9224.js"><link rel="prefetch" href="/assets/js/71.51e0c37c.js"><link rel="prefetch" href="/assets/js/72.cba6948f.js"><link rel="prefetch" href="/assets/js/73.6abd4dce.js"><link rel="prefetch" href="/assets/js/74.b5fa6c08.js"><link rel="prefetch" href="/assets/js/75.8f34d79a.js"><link rel="prefetch" href="/assets/js/76.5fc9c80d.js"><link rel="prefetch" href="/assets/js/77.6e4a5e93.js"><link rel="prefetch" href="/assets/js/78.bffd6a40.js"><link rel="prefetch" href="/assets/js/79.1a7f5d0e.js"><link rel="prefetch" href="/assets/js/8.e4995b94.js"><link rel="prefetch" href="/assets/js/80.b70c1106.js"><link rel="prefetch" href="/assets/js/81.4476a49e.js"><link rel="prefetch" href="/assets/js/82.f40aa218.js"><link rel="prefetch" href="/assets/js/83.d4c57d4f.js"><link rel="prefetch" href="/assets/js/84.d1dc86f7.js"><link rel="prefetch" href="/assets/js/85.dd779a2e.js"><link rel="prefetch" href="/assets/js/86.569cfbc2.js"><link rel="prefetch" href="/assets/js/87.938a5bd8.js"><link rel="prefetch" href="/assets/js/88.2d3dadd7.js"><link rel="prefetch" href="/assets/js/89.3aeee704.js"><link rel="prefetch" href="/assets/js/9.54a41cce.js"><link rel="prefetch" href="/assets/js/90.2b47965b.js"><link rel="prefetch" href="/assets/js/91.58aa3587.js"><link rel="prefetch" href="/assets/js/92.47d2a191.js"><link rel="prefetch" href="/assets/js/93.ff10ac69.js"><link rel="prefetch" href="/assets/js/94.a8d90c0c.js"><link rel="prefetch" href="/assets/js/95.15ae9c48.js"><link rel="prefetch" href="/assets/js/96.43aa4adb.js"><link rel="prefetch" href="/assets/js/97.4eb74c93.js"><link rel="prefetch" href="/assets/js/98.94686ad8.js"><link rel="prefetch" href="/assets/js/99.ceb4f2f1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.32e41c9b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">TaoPoppy</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/learnMaterials/" class="nav-link">资料</a></div><div class="nav-item"><a href="https://github.com/taopoppy/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/construct/" class="nav-link">小技巧</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">小程序</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/WeiXin-Rumen/" class="nav-link">微信小程序入门和实战</a></li><li class="dropdown-item"><!----> <a href="/Weixin-quanzhan/" class="nav-link">微信小程序全栈开发实战</a></li><li class="dropdown-item"><!----> <a href="/WeiXin-Combat/" class="nav-link">微信小程序云开发实战</a></li><li class="dropdown-item"><!----> <a href="/WeiXin-money/" class="nav-link">微信支付和分享</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具系列</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Jest/" class="nav-link">前端自动化测试</a></li><li class="dropdown-item"><!----> <a href="/Webpack/" class="nav-link">前端工程化</a></li><li class="dropdown-item"><!----> <a href="/Optimization/" class="nav-link">前端性能优化</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Go</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/go/" class="nav-link router-link-active">go语言入门实践</a></li><li class="dropdown-item"><!----> <a href="/go-concurrent/" class="nav-link">go并发编程详解</a></li><li class="dropdown-item"><!----> <a href="/go-web/" class="nav-link">go与web编程实战</a></li><li class="dropdown-item"><!----> <a href="/go-reptile/" class="nav-link">go爬虫编程实战</a></li><li class="dropdown-item"><!----> <a href="/Beego/" class="nav-link">Beego框架入门</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">node</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">node入门</a></li><li class="dropdown-item"><!----> <a href="/node-RESTful/" class="nav-link">node与RESTful</a></li><li class="dropdown-item"><!----> <a href="/node-GraphQL/" class="nav-link">node与GraphQL</a></li><li class="dropdown-item"><!----> <a href="/node-BFF/" class="nav-link">node与BFF</a></li><li class="dropdown-item"><!----> <a href="/node-blog/" class="nav-link">node博客后台</a></li><li class="dropdown-item"><!----> <a href="/node-weibo/" class="nav-link">node实战微博</a></li><li class="dropdown-item"><!----> <a href="/node-microService/" class="nav-link">node微服务</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">react</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react-redux/" class="nav-link">React+Redux入门详解</a></li><li class="dropdown-item"><!----> <a href="/react-typescript/" class="nav-link">React+TypeScript的完美结合</a></li><li class="dropdown-item"><!----> <a href="/react-webapp/" class="nav-link">React网易云Webapp</a></li><li class="dropdown-item"><!----> <a href="/react-ssr/" class="nav-link">React服务器渲染原理解析</a></li><li class="dropdown-item"><!----> <a href="/react-source/" class="nav-link">React深度剖析和源码解析</a></li><li class="dropdown-item"><!----> <a href="/react-antd/" class="nav-link">React+Typescript开发组件库</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-ssr/" class="nav-link">Vue服务端渲染原理解析</a></li><li class="dropdown-item"><!----> <a href="/vue-interview/" class="nav-link">Vue3入门和实践</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">后端系列</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Mysql/" class="nav-link">mysql</a></li><li class="dropdown-subitem"><a href="/Mysql-Architecture/" class="nav-link">mysql-Architecture</a></li></ul></li><li class="dropdown-item"><h4>linux操作系统</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Linux/" class="nav-link">linux</a></li><li class="dropdown-subitem"><a href="/Linux-Architecture/" class="nav-link">linux-Architecture</a></li></ul></li><li class="dropdown-item"><h4>网络协议</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Protocol/" class="nav-link">protocol</a></li><li class="dropdown-subitem"><a href="/go/font-end-protocol.html" class="nav-link">font-end-protocol</a></li></ul></li><li class="dropdown-item"><h4>运维系统</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/prometheus/" class="nav-link">prometheus</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端系列</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Front-end/" class="nav-link">前端初级面试</a></li><li class="dropdown-item"><!----> <a href="/Front-advance/" class="nav-link">前端中级面试</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">究极全栈</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Big-Front-End/" class="nav-link">大前端</a></li><li class="dropdown-item"><!----> <a href="/Web-Architect/" class="nav-link">web架构课</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">首页</a></div><div class="nav-item"><a href="/learnMaterials/" class="nav-link">资料</a></div><div class="nav-item"><a href="https://github.com/taopoppy/" target="_blank" rel="noopener noreferrer" class="nav-link external">
  github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div><div class="nav-item"><a href="/construct/" class="nav-link">小技巧</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">小程序</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/WeiXin-Rumen/" class="nav-link">微信小程序入门和实战</a></li><li class="dropdown-item"><!----> <a href="/Weixin-quanzhan/" class="nav-link">微信小程序全栈开发实战</a></li><li class="dropdown-item"><!----> <a href="/WeiXin-Combat/" class="nav-link">微信小程序云开发实战</a></li><li class="dropdown-item"><!----> <a href="/WeiXin-money/" class="nav-link">微信支付和分享</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">工具系列</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Jest/" class="nav-link">前端自动化测试</a></li><li class="dropdown-item"><!----> <a href="/Webpack/" class="nav-link">前端工程化</a></li><li class="dropdown-item"><!----> <a href="/Optimization/" class="nav-link">前端性能优化</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Go</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/go/" class="nav-link router-link-active">go语言入门实践</a></li><li class="dropdown-item"><!----> <a href="/go-concurrent/" class="nav-link">go并发编程详解</a></li><li class="dropdown-item"><!----> <a href="/go-web/" class="nav-link">go与web编程实战</a></li><li class="dropdown-item"><!----> <a href="/go-reptile/" class="nav-link">go爬虫编程实战</a></li><li class="dropdown-item"><!----> <a href="/Beego/" class="nav-link">Beego框架入门</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">node</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/node/" class="nav-link">node入门</a></li><li class="dropdown-item"><!----> <a href="/node-RESTful/" class="nav-link">node与RESTful</a></li><li class="dropdown-item"><!----> <a href="/node-GraphQL/" class="nav-link">node与GraphQL</a></li><li class="dropdown-item"><!----> <a href="/node-BFF/" class="nav-link">node与BFF</a></li><li class="dropdown-item"><!----> <a href="/node-blog/" class="nav-link">node博客后台</a></li><li class="dropdown-item"><!----> <a href="/node-weibo/" class="nav-link">node实战微博</a></li><li class="dropdown-item"><!----> <a href="/node-microService/" class="nav-link">node微服务</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">react</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/react-redux/" class="nav-link">React+Redux入门详解</a></li><li class="dropdown-item"><!----> <a href="/react-typescript/" class="nav-link">React+TypeScript的完美结合</a></li><li class="dropdown-item"><!----> <a href="/react-webapp/" class="nav-link">React网易云Webapp</a></li><li class="dropdown-item"><!----> <a href="/react-ssr/" class="nav-link">React服务器渲染原理解析</a></li><li class="dropdown-item"><!----> <a href="/react-source/" class="nav-link">React深度剖析和源码解析</a></li><li class="dropdown-item"><!----> <a href="/react-antd/" class="nav-link">React+Typescript开发组件库</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">vue</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue-ssr/" class="nav-link">Vue服务端渲染原理解析</a></li><li class="dropdown-item"><!----> <a href="/vue-interview/" class="nav-link">Vue3入门和实践</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">后端系列</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>数据库</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Mysql/" class="nav-link">mysql</a></li><li class="dropdown-subitem"><a href="/Mysql-Architecture/" class="nav-link">mysql-Architecture</a></li></ul></li><li class="dropdown-item"><h4>linux操作系统</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Linux/" class="nav-link">linux</a></li><li class="dropdown-subitem"><a href="/Linux-Architecture/" class="nav-link">linux-Architecture</a></li></ul></li><li class="dropdown-item"><h4>网络协议</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/Protocol/" class="nav-link">protocol</a></li><li class="dropdown-subitem"><a href="/go/font-end-protocol.html" class="nav-link">font-end-protocol</a></li></ul></li><li class="dropdown-item"><h4>运维系统</h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="/prometheus/" class="nav-link">prometheus</a></li></ul></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">前端系列</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Front-end/" class="nav-link">前端初级面试</a></li><li class="dropdown-item"><!----> <a href="/Front-advance/" class="nav-link">前端中级面试</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">究极全栈</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Big-Front-End/" class="nav-link">大前端</a></li><li class="dropdown-item"><!----> <a href="/Web-Architect/" class="nav-link">web架构课</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/go/" class="sidebar-link">学习go语言</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Go语言基础语法</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/go/go_one_introduce.html" class="sidebar-link">Go基础语法</a></li><li><a href="/go/go_one_container.html" class="sidebar-link">Go内建容器</a></li><li><a href="/go/go_one_struct.html" class="sidebar-link">Go面向结构</a></li><li><a href="/go/go_one_interface.html" class="sidebar-link">Go面向接口</a></li><li><a href="/go/go_one_functioncode.html" class="sidebar-link">Go函数式编程</a></li><li><a href="/go/go_one_errorhand.html" class="sidebar-link">Go资源管理和出错处理</a></li><li><a href="/go/go_one_test.html" class="active sidebar-link">Go测试和性能调优</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/go/go_one_test.html#测试概述" class="sidebar-link">测试概述</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/go/go_one_test.html#_1-传统测试" class="sidebar-link">1. 传统测试</a></li><li class="sidebar-sub-header"><a href="/go/go_one_test.html#_2-表格驱动测试" class="sidebar-link">2. 表格驱动测试</a></li></ul></li><li class="sidebar-sub-header"><a href="/go/go_one_test.html#测试和性能实战" class="sidebar-link">测试和性能实战</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/go/go_one_test.html#_1-代码测试和性能测试" class="sidebar-link">1. 代码测试和性能测试</a></li><li class="sidebar-sub-header"><a href="/go/go_one_test.html#_2-pprof性能调优" class="sidebar-link">2. pprof性能调优</a></li><li class="sidebar-sub-header"><a href="/go/go_one_test.html#_3-代码覆盖率" class="sidebar-link">3. 代码覆盖率</a></li></ul></li><li class="sidebar-sub-header"><a href="/go/go_one_test.html#测试http服务器" class="sidebar-link">测试http服务器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/go/go_one_test.html#_1-函数式测试" class="sidebar-link">1. 函数式测试</a></li><li class="sidebar-sub-header"><a href="/go/go_one_test.html#_2-服务器测试" class="sidebar-link">2. 服务器测试</a></li></ul></li><li class="sidebar-sub-header"><a href="/go/go_one_test.html#生成文档和实例代码" class="sidebar-link">生成文档和实例代码</a></li></ul></li><li><a href="/go/go_one_goroutine.html" class="sidebar-link">Go的协程</a></li><li><a href="/go/go_one_channel.html" class="sidebar-link">Go的通道</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go核心语法夯实</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go标准库和实践</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Go源码深度剖析</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="go测试和性能调优"><a href="#go测试和性能调优" aria-hidden="true" class="header-anchor">#</a> Go测试和性能调优</h1> <h2 id="测试概述"><a href="#测试概述" aria-hidden="true" class="header-anchor">#</a> 测试概述</h2> <p>在<code>Go</code>语言中，我们有非常有名的一句话就是：<font color="#DD1144">Debugging Sucks！，Testing Rocks</font>，就是说在<code>Go</code>语言中我们希望多做测试，而不要去堆程序调试。所以在测试程序这一方面<code>Go</code>语言还是有自己独到的见解的。</p> <p>虽然是这样，但是有时候按照程序员编程的习惯和必要，还是要用到调试的，但是调试基本上和别的语言没有啥区别，在<code>vscode</code>，直接<code>F5</code>就完事了，打断点调试即可，我们下面来说测试。</p> <h3 id="_1-传统测试"><a href="#_1-传统测试" aria-hidden="true" class="header-anchor">#</a> 1. 传统测试</h3> <div class="language-java extra-class"><pre class="language-java"><code><span class="token annotation punctuation">@Test</span> <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">testAdd</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
	<span class="token function">assertEquals</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token class-name">Integer</span><span class="token punctuation">.</span>MIN_VALUE<span class="token punctuation">,</span> <span class="token function">add</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token class-name">Integer</span><span class="token punctuation">.</span>MAX_VALUE<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><font color="#1E90FF">测试数据和测试逻辑混合在一起</font></li> <li><font color="#1E90FF">出错信息不明确</font></li> <li><font color="#1E90FF">一旦一个数据出错测试全部测试</font></li></ul> <h3 id="_2-表格驱动测试"><a href="#_2-表格驱动测试" aria-hidden="true" class="header-anchor">#</a> 2. 表格驱动测试</h3> <div class="language-go extra-class"><pre class="language-go"><code>tests <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">struct</span> <span class="token punctuation">{</span>
		a<span class="token punctuation">,</span> b<span class="token punctuation">,</span> c <span class="token builtin">int32</span>
	<span class="token punctuation">}</span><span class="token punctuation">{</span>
		<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span><span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span>math<span class="token punctuation">.</span>MaxInt32<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> math<span class="token punctuation">.</span>MinInt32<span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">for</span> i<span class="token punctuation">,</span> test <span class="token operator">:=</span> <span class="token keyword">range</span> tests <span class="token punctuation">{</span>
		<span class="token keyword">if</span> actual <span class="token operator">:=</span> <span class="token function">add</span><span class="token punctuation">(</span>test<span class="token punctuation">.</span>a<span class="token punctuation">,</span> test<span class="token punctuation">.</span>b<span class="token punctuation">)</span><span class="token punctuation">;</span> actual <span class="token operator">!=</span> test<span class="token punctuation">.</span>c <span class="token punctuation">{</span>
			fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;第 %v个数据出错了&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
</code></pre></div><ul><li><font color="#DD1144">分离的测试数据和测试逻辑</font></li> <li><font color="#DD1144">明确的出错信息</font></li> <li><font color="#DD1144">可以部分失败</font></li> <li><font color="#DD1144">go语言的写法非常易于实践表格驱动测试</font></li></ul> <h2 id="测试和性能实战"><a href="#测试和性能实战" aria-hidden="true" class="header-anchor">#</a> 测试和性能实战</h2> <h3 id="_1-代码测试和性能测试"><a href="#_1-代码测试和性能测试" aria-hidden="true" class="header-anchor">#</a> 1. 代码测试和性能测试</h3> <p>首先我们比如要对一个<code>strings\strings.go</code>的文件测试和性能的测试，这个文件如下：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main
<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">lengthOfNonRepeatingSubStr</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>
	lastOccurred <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">rune</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>
	start <span class="token operator">:=</span> <span class="token number">0</span>
	maxLength <span class="token operator">:=</span> <span class="token number">0</span>
	<span class="token keyword">for</span> i<span class="token punctuation">,</span> ch <span class="token operator">:=</span> <span class="token keyword">range</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">rune</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token keyword">if</span> lastI<span class="token punctuation">,</span> ok <span class="token operator">:=</span> lastOccurred<span class="token punctuation">[</span>ch<span class="token punctuation">]</span><span class="token punctuation">;</span> ok <span class="token operator">&amp;&amp;</span> lastI <span class="token operator">&gt;=</span> start <span class="token punctuation">{</span>
			start <span class="token operator">=</span> lastI <span class="token operator">+</span> <span class="token number">1</span>
		<span class="token punctuation">}</span>
		<span class="token keyword">if</span> i<span class="token operator">-</span>start<span class="token operator">+</span><span class="token number">1</span> <span class="token operator">&gt;</span> maxLength <span class="token punctuation">{</span>
			maxLength <span class="token operator">=</span> i <span class="token operator">-</span> start <span class="token operator">+</span> <span class="token number">1</span>
		<span class="token punctuation">}</span>
		lastOccurred<span class="token punctuation">[</span>ch<span class="token punctuation">]</span> <span class="token operator">=</span> i
	<span class="token punctuation">}</span>
	<span class="token keyword">return</span> maxLength
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">lengthOfNonRepeatingSubStr</span><span class="token punctuation">(</span><span class="token string">&quot;地方撒打发辅导费阿达恩爱大额奥拉夫了&quot;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>
<span class="token punctuation">}</span>
</code></pre></div><p>我们要对其中的<code>lengthOfNonRepeatingSubStr</code>进行测试，所以我们需要先这样做：<font color="#DD1144">在同级的目录下创建一个strings_test.go文件，这是测试文件的规范写法</font>，然后书写下面的代码：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;testing&quot;</span>
<span class="token punctuation">)</span>
<span class="token comment">// 代码测试函数</span>
<span class="token keyword">func</span> <span class="token function">TestSubstr</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	tests <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">struct</span> <span class="token punctuation">{</span>
		s   <span class="token builtin">string</span>
		ans <span class="token builtin">int</span>
	<span class="token punctuation">}</span><span class="token punctuation">{</span>
		<span class="token comment">// Normal cases</span>
		<span class="token punctuation">{</span><span class="token string">&quot;abcabcbb&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span><span class="token string">&quot;pwwkew&quot;</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// Edge cases</span>
		<span class="token punctuation">{</span><span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span><span class="token string">&quot;b&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span><span class="token string">&quot;bbbbbbb&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span><span class="token string">&quot;abcabcabcd&quot;</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token comment">// chinese cases</span>
		<span class="token punctuation">{</span><span class="token string">&quot;这里是慕课网&quot;</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span><span class="token string">&quot;一二三二一&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token punctuation">{</span><span class="token string">&quot;地方撒打发辅导费阿达恩爱大额奥拉夫了奥&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> tt <span class="token operator">:=</span> <span class="token keyword">range</span> tests <span class="token punctuation">{</span>

		actual <span class="token operator">:=</span> <span class="token function">lengthOfNonRepeatingSubStr</span><span class="token punctuation">(</span>tt<span class="token punctuation">.</span>s<span class="token punctuation">)</span>
		<span class="token keyword">if</span> actual <span class="token operator">!=</span> tt<span class="token punctuation">.</span>ans <span class="token punctuation">{</span>
			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;got %d for input %s;&quot;</span><span class="token operator">+</span><span class="token string">&quot;expected %d&quot;</span><span class="token punctuation">,</span> actual<span class="token punctuation">,</span> tt<span class="token punctuation">.</span>s<span class="token punctuation">,</span> tt<span class="token punctuation">.</span>ans<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token comment">// 性能测试函数</span>
<span class="token keyword">func</span> <span class="token function">BenchmarkSubstr</span><span class="token punctuation">(</span>b <span class="token operator">*</span>testing<span class="token punctuation">.</span>B<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	s<span class="token punctuation">,</span> ans <span class="token operator">:=</span> <span class="token string">&quot;地方撒打发辅导费阿达恩爱大额奥拉夫了奥&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">13</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		s <span class="token operator">=</span> s <span class="token operator">+</span> s
	<span class="token punctuation">}</span>

	<span class="token comment">// 从这里开始测试性能</span>
	b<span class="token punctuation">.</span><span class="token function">ResetTimer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token comment">// 循环多少次无需你担心，它会自动去处理</span>
	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> b<span class="token punctuation">.</span>N<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>
		actual <span class="token operator">:=</span> <span class="token function">lengthOfNonRepeatingSubStr</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
		<span class="token keyword">if</span> actual <span class="token operator">!=</span> ans <span class="token punctuation">{</span>
			b<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;got %d for input %s;&quot;</span><span class="token operator">+</span><span class="token string">&quot;expected %d&quot;</span><span class="token punctuation">,</span> actual<span class="token punctuation">,</span> s<span class="token punctuation">,</span> ans<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li><font color="#DD1144">测试的函数名称必须是Test打头的名称，函数参数必须是t *testing.T</font></li> <li><font color="#DD1144">测试的启动需要进入到测试文件的上层目录下，然后使用下面这个命令</font><div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span> test <span class="token punctuation">.</span>
</code></pre></div></li> <li><font color="#DD1144">性能测试的函数名称必须是Benchmark打头的名称，函数参数必须是b *testing.B</font></li> <li><font color="#DD1144">性能测试的启动需要进入测试文件的上层目录下，然后使用下面这个命令</font><div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span> test <span class="token operator">-</span>bench <span class="token punctuation">.</span>
</code></pre></div></li> <li><font color="#1E90FF">性能测试会显示：BenchmarkSubstr-4 169 7047740 ns/op,意思就是大概执行了169万次，每次的执行时间大概是7047740ns秒</font></li></ul> <h3 id="_2-pprof性能调优"><a href="#_2-pprof性能调优" aria-hidden="true" class="header-anchor">#</a> 2. pprof性能调优</h3> <p>通过上面的测试我们已经能够获取到文件执行的时间，现在我们要优化它，想让它的执行时间变短，这个可以帮助我们在算法的求解中来优化算法：</p> <p>在执行命令之前，我们需要先下载<code>svg</code>的一个工具，叫做<font color="#1E90FF">Graphviz</font>,我们直接去官网<a href="www.graphviz.org">www.graphviz.org</a>直接下载就行了。下载后需要向<code>PATH</code>中添加<code>Graphviz/bin</code>的环境变量。</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span> test <span class="token operator">-</span>bench <span class="token punctuation">.</span> <span class="token operator">-</span>cpuprofile cpu<span class="token punctuation">.</span>out  <span class="token comment">// 生成cpu.out二进制文件</span>

<span class="token keyword">go</span> tool pprof cpu<span class="token punctuation">.</span>out <span class="token comment">// 进入到pprof命令行操作cpu.out文件</span>

<span class="token punctuation">(</span>pprof<span class="token punctuation">)</span> web <span class="token comment">// 进入浏览器，图形化展示二进制文件</span>
</code></pre></div><p>然后就会在浏览器中展现这样的一个<code>svg</code>的图像,其中方框越大的线条越粗的表示耗费的时间越大，我们可以根据图形中的内容来判断程序中的哪个部分耗时过长，并且根据具体情况进行优化<br> <img src="/go_one_websvg.png" alt=""></p> <p>从图中可以看到基本上看到两个最耗时的操作，就<code>strings\strings.go</code>中的将<code>utf8</code>的字符串转换成为<code>[]rune()</code>的操作和<code>map[rune]int</code>这个数据结构操作比较耗时，前者我们无法优化，必须要转换，后者我们可以通过考虑其他的数据结构来替换<code>map</code>以此达到优化的效果：</p> <h3 id="_3-代码覆盖率"><a href="#_3-代码覆盖率" aria-hidden="true" class="header-anchor">#</a> 3. 代码覆盖率</h3> <p>代码覆盖率是指在文件运行的时候有多少代码被执行到了，我们在<code>GoLand</code>和<code>Idea</code>中有专门的图像化工具，在<code>vscode</code>中我们需要使用下面两个命令：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span> test <span class="token operator">-</span>coverprofile<span class="token operator">=</span>c<span class="token punctuation">.</span>out   <span class="token comment">// 在当面文件夹下生成一个c.out的文件，包含当前文件下文件代码覆盖率的信息</span>
<span class="token keyword">go</span> tool cover <span class="token operator">-</span>html<span class="token operator">=</span>c<span class="token punctuation">.</span>out     <span class="token comment">// 打开一个网页，显示当前代码覆盖率的信息</span>
</code></pre></div><h2 id="测试http服务器"><a href="#测试http服务器" aria-hidden="true" class="header-anchor">#</a> 测试http服务器</h2> <p>上面说了那么多测试，我们现在就来写个真实的测试，我们之前写了一个<code>http</code>的服务，那里我们做了很多错误处理，<font color="#1E90FF">我们对http的测试并不是测试它的控制逻辑，而是测试错误处理</font></p> <p>关于<code>http</code>的测试有两种方法：一种是类似于单元测试，测试错误处理的函数，另外一种是通过这个错误处理的函数启动一个真正的服务器来测试，我们首先来看之前书写的那个错误处理函数：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">errWrapper</span><span class="token punctuation">(</span>handler appHandler<span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>writer http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> request <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>
		<span class="token comment">// 第一种情况：panic</span>
		<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
			<span class="token keyword">if</span> r <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> r <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
				log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Panic: %v&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>
				http<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span>writer<span class="token punctuation">,</span>
					http<span class="token punctuation">.</span><span class="token function">StatusText</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span>StatusInternalServerError<span class="token punctuation">)</span><span class="token punctuation">,</span>
					http<span class="token punctuation">.</span>StatusInternalServerError<span class="token punctuation">,</span>
				<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

		err <span class="token operator">:=</span> <span class="token function">handler</span><span class="token punctuation">(</span>writer<span class="token punctuation">,</span> request<span class="token punctuation">)</span>
		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>
			log<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;Error handling request: %s&quot;</span><span class="token punctuation">,</span> err<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

			<span class="token comment">// 第二种情况：处理userError</span>
			<span class="token keyword">if</span> userErr<span class="token punctuation">,</span> ok <span class="token operator">:=</span> err<span class="token punctuation">.</span><span class="token punctuation">(</span>userError<span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>
				http<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span>writer<span class="token punctuation">,</span> userErr<span class="token punctuation">.</span><span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> http<span class="token punctuation">.</span>StatusBadRequest<span class="token punctuation">)</span>
				<span class="token keyword">return</span>
			<span class="token punctuation">}</span>
			<span class="token comment">// 第三种情况：处理systemError</span>
			code <span class="token operator">:=</span> http<span class="token punctuation">.</span>StatusOK
			<span class="token comment">// 打开文件的错误有很多，比如文件不存在，或者文件没有权限等等</span>
			<span class="token keyword">switch</span> <span class="token punctuation">{</span>
			<span class="token keyword">case</span> os<span class="token punctuation">.</span><span class="token function">IsNotExist</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">// 如果是文件不存在的错误</span>
				code <span class="token operator">=</span> http<span class="token punctuation">.</span>StatusNotFound
			<span class="token keyword">case</span> os<span class="token punctuation">.</span><span class="token function">IsPermission</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">// 如果是没有权限的错误</span>
				code <span class="token operator">=</span> http<span class="token punctuation">.</span>StatusForbidden
			<span class="token keyword">default</span><span class="token punctuation">:</span> <span class="token comment">// 如果是啥都不知道的错误</span>
				code <span class="token operator">=</span> http<span class="token punctuation">.</span>StatusInternalServerError
			<span class="token punctuation">}</span>
			<span class="token comment">// func Error(w ResponseWriter, error string, code int)</span>
			http<span class="token punctuation">.</span><span class="token function">Error</span><span class="token punctuation">(</span>writer<span class="token punctuation">,</span> http<span class="token punctuation">.</span><span class="token function">StatusText</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span><span class="token punctuation">,</span> code<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>可以看到错误处理处理了三种不同的情况，分别是<font color="#1E90FF">panic</font>、<font color="#1E90FF">userError</font>和<font color="#1E90FF">systemError</font>，所以我们需要用测试函数的方式来测试<code>errWrapper</code>，测试之前我们要写一个测试对象和很多模拟不同类型错误的控制器：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">var</span> tests <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token keyword">struct</span> <span class="token punctuation">{</span>
	h       appHandler
	code    <span class="token builtin">int</span>
	message <span class="token builtin">string</span>
<span class="token punctuation">}</span><span class="token punctuation">{</span>
	<span class="token punctuation">{</span>errPanic<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token string">&quot;Internal Server Error&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>errUserError<span class="token punctuation">,</span> <span class="token number">400</span><span class="token punctuation">,</span> <span class="token string">&quot;User error&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>errNotFound<span class="token punctuation">,</span> <span class="token number">404</span><span class="token punctuation">,</span> <span class="token string">&quot;Not Found&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>errNoPermission<span class="token punctuation">,</span> <span class="token number">403</span><span class="token punctuation">,</span> <span class="token string">&quot;Forbidden&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>errUnknown<span class="token punctuation">,</span> <span class="token number">500</span><span class="token punctuation">,</span> <span class="token string">&quot;Internal Server Error&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">{</span>noError<span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>

<span class="token comment">// 模仿的panic的控制器</span>
<span class="token keyword">func</span> <span class="token function">errPanic</span><span class="token punctuation">(</span>writer http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> request <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token function">panic</span><span class="token punctuation">(</span><span class="token number">123</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 模仿的用户错误的控制器</span>
<span class="token keyword">type</span> testingUserError <span class="token builtin">string</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>e testingUserError<span class="token punctuation">)</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> e<span class="token punctuation">.</span><span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>e testingUserError<span class="token punctuation">)</span> <span class="token function">Message</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">string</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">errUserError</span><span class="token punctuation">(</span>writer http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> request <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token function">testingUserError</span><span class="token punctuation">(</span><span class="token string">&quot;User error&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 模仿文件不存在的错误的控制器</span>
<span class="token keyword">func</span> <span class="token function">errNotFound</span><span class="token punctuation">(</span>writer http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> request <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> os<span class="token punctuation">.</span>ErrNotExist
<span class="token punctuation">}</span>

<span class="token comment">// 模仿文件没有权限的错误的控制器</span>
<span class="token keyword">func</span> <span class="token function">errNoPermission</span><span class="token punctuation">(</span>writer http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> request <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> os<span class="token punctuation">.</span>ErrPermission
<span class="token punctuation">}</span>

<span class="token comment">// 模仿未知错误的控制器</span>
<span class="token keyword">func</span> <span class="token function">errUnknown</span><span class="token punctuation">(</span>writer http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> request <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;unknown error&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 模仿错误为nil的控制器</span>
<span class="token keyword">func</span> <span class="token function">noError</span><span class="token punctuation">(</span>writer http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> request <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>
	<span class="token keyword">return</span> <span class="token boolean">nil</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-函数式测试"><a href="#_1-函数式测试" aria-hidden="true" class="header-anchor">#</a> 1. 函数式测试</h3> <p>然后根据上述的测试对象和很多模拟不同类型错误的控制器，来用第一种方法来测试<code>errWrapper</code>函数：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">TestErrWrapper</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> tt <span class="token operator">:=</span> <span class="token keyword">range</span> tests <span class="token punctuation">{</span>
		f <span class="token operator">:=</span> <span class="token function">errWrapper</span><span class="token punctuation">(</span>tt<span class="token punctuation">.</span>h<span class="token punctuation">)</span>              <span class="token comment">// 拿到模拟的控制器</span>
		response <span class="token operator">:=</span> httptest<span class="token punctuation">.</span><span class="token function">NewRecorder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 假的response</span>
		request <span class="token operator">:=</span> httptest<span class="token punctuation">.</span><span class="token function">NewRequest</span><span class="token punctuation">(</span>
			http<span class="token punctuation">.</span>MethodGet<span class="token punctuation">,</span>
			<span class="token string">&quot;http://www.imooc.com&quot;</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>     <span class="token comment">// 假的request</span>
		<span class="token function">f</span><span class="token punctuation">(</span>response<span class="token punctuation">,</span> request<span class="token punctuation">)</span>               <span class="token comment">// 用模拟的控制器控制错误的发生</span>
		<span class="token comment">// 判断发生的错误的Code和message是否满足我们的预期</span>
		b<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>response<span class="token punctuation">.</span>Body<span class="token punctuation">)</span>
		body <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Trim</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> response<span class="token punctuation">.</span>Code <span class="token operator">!=</span> tt<span class="token punctuation">.</span>code <span class="token operator">||</span> body <span class="token operator">!=</span> tt<span class="token punctuation">.</span>message <span class="token punctuation">{</span>
			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;expect (%d,%s);&quot;</span><span class="token operator">+</span><span class="token string">&quot;got (%d,%s)&quot;</span><span class="token punctuation">,</span> tt<span class="token punctuation">.</span>code<span class="token punctuation">,</span> tt<span class="token punctuation">.</span>message<span class="token punctuation">,</span> response<span class="token punctuation">.</span>Code<span class="token punctuation">,</span> body<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_2-服务器测试"><a href="#_2-服务器测试" aria-hidden="true" class="header-anchor">#</a> 2. 服务器测试</h3> <p>第二种就是开启一个真实的服务器进行测试：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">func</span> <span class="token function">TestErrWrapperInServer</span><span class="token punctuation">(</span>t <span class="token operator">*</span>testing<span class="token punctuation">.</span>T<span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> tt <span class="token operator">:=</span> <span class="token keyword">range</span> tests <span class="token punctuation">{</span>
		f <span class="token operator">:=</span> <span class="token function">errWrapper</span><span class="token punctuation">(</span>tt<span class="token punctuation">.</span>h<span class="token punctuation">)</span>
		<span class="token comment">// 启动一个真的http服务</span>
		server <span class="token operator">:=</span> httptest<span class="token punctuation">.</span><span class="token function">NewServer</span><span class="token punctuation">(</span>http<span class="token punctuation">.</span><span class="token function">HandlerFunc</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// </span>
		resp<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> http<span class="token punctuation">.</span><span class="token function">Get</span><span class="token punctuation">(</span>server<span class="token punctuation">.</span>URL<span class="token punctuation">)</span>
		<span class="token comment">// 判断发生的错误的Code和message是否满足我们的预期</span>
		b<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadAll</span><span class="token punctuation">(</span>resp<span class="token punctuation">.</span>Body<span class="token punctuation">)</span>
		body <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Trim</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;\n&quot;</span><span class="token punctuation">)</span>
		<span class="token keyword">if</span> resp<span class="token punctuation">.</span>StatusCode <span class="token operator">!=</span> tt<span class="token punctuation">.</span>code <span class="token operator">||</span> body <span class="token operator">!=</span> tt<span class="token punctuation">.</span>message <span class="token punctuation">{</span>
			t<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;expect (%d,%s);&quot;</span><span class="token operator">+</span><span class="token string">&quot;got (%d,%s)&quot;</span><span class="token punctuation">,</span> tt<span class="token punctuation">.</span>code<span class="token punctuation">,</span> tt<span class="token punctuation">.</span>message<span class="token punctuation">,</span> resp<span class="token punctuation">.</span>StatusCode<span class="token punctuation">,</span> body<span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><p>基本上这两种方法我们就展示完了，两种方式有所区别：</p> <ul><li><font color="#3eaf7c">第一种</font>：<font color="#1E90FF">通过使用假的Request/Response,测试更细，范围有限</font></li> <li><font color="#3eaf7c">第二种</font>：<font color="#1E90FF">通过起服务器，测试范围大，速度更慢</font></li></ul> <h2 id="生成文档和实例代码"><a href="#生成文档和实例代码" aria-hidden="true" class="header-anchor">#</a> 生成文档和实例代码</h2> <p>开启文档说明只需要先下载<code>godoc</code>，因为<font color="#DD1144">go doc</font>这个命令是查看文档的，<code>godoc</code>是生成文档的。但是新版本的<code>godoc</code>已经不再内置了，需要下载：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token keyword">go</span> get golang<span class="token punctuation">.</span>org<span class="token operator">/</span>x<span class="token operator">/</span>tools<span class="token operator">/</span>cmd<span class="token operator">/</span>godoc
<span class="token keyword">go</span> install golang<span class="token punctuation">.</span>org<span class="token operator">/</span>x<span class="token operator">/</span>tools<span class="token operator">/</span>cmd<span class="token operator">/</span>godoc
</code></pre></div><p>然后启动命令：</p> <div class="language-go extra-class"><pre class="language-go"><code>godoc <span class="token operator">-</span>http <span class="token punctuation">:</span><span class="token number">6060</span>
</code></pre></div><p>然后就在<code>localhost:6060</code>开启一个文档说明的服务器</p> <p>我们要说明的是，给一个文档如何写实例：</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// Queue/queue.go</span>
<span class="token keyword">package</span> queue

<span class="token comment">// An FIFO queue</span>
<span class="token keyword">type</span> Queue <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>
<span class="token comment">// Pushes the element into the queue.</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>q <span class="token operator">*</span>Queue<span class="token punctuation">)</span> <span class="token function">Push</span><span class="token punctuation">(</span>v <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token operator">*</span>q <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span><span class="token operator">*</span>q<span class="token punctuation">,</span> v<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><p>下面给上面的的代码写示例</p> <div class="language-go extra-class"><pre class="language-go"><code><span class="token comment">// Queue/queue_test.go</span>
<span class="token keyword">package</span> queue
<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>
<span class="token comment">// 示例代码必须起这样格式的名字</span>
<span class="token keyword">func</span> <span class="token function">ExampleQueue_Pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	q <span class="token operator">:=</span> Queue<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">}</span>
	q<span class="token punctuation">.</span><span class="token function">Push</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
	q<span class="token punctuation">.</span><span class="token function">Pop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>q<span class="token punctuation">)</span>

	<span class="token comment">// Output:</span>
	<span class="token comment">// 1</span>
<span class="token punctuation">}</span>
</code></pre></div><p>这样我们重新执行<code>godoc -http :6060</code>在<code>Queue</code>文档中就有示例说明了。</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">Last Updated: </span> <span class="time">1/2/2020, 12:25:43 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/go/go_one_errorhand.html" class="prev">
          Go资源管理和出错处理
        </a></span> <span class="next"><a href="/go/go_one_goroutine.html">
          Go的协程
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.1a394514.js" defer></script><script src="/assets/js/2.8304a06b.js" defer></script><script src="/assets/js/140.a6685c82.js" defer></script>
  </body>
</html>
