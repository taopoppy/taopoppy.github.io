(window.webpackJsonp=window.webpackJsonp||[]).push([[76],{262:function(t,a,e){"use strict";e.r(a);var s=e(0),v=Object(s.a)({},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[e("h1",{attrs:{id:"脚手架分析"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#脚手架分析","aria-hidden":"true"}},[t._v("#")]),t._v(" 脚手架分析")]),t._v(" "),e("p",[e("font",{attrs:{color:"#DD1144"}},[t._v("所谓的脚手架就是一段node的程序，可以帮助我们生成一个项目，包含项目的目录和相关的依赖")])],1),t._v(" "),e("h2",{attrs:{id:"createreateapp"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#createreateapp","aria-hidden":"true"}},[t._v("#")]),t._v(" CreateReateApp")]),t._v(" "),e("p",[t._v("通过"),e("code",[t._v("CreateReateApp")]),t._v("脚手架来生成一个项目：")]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("npx create"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("react"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("app my"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("app\n")])])]),e("p",[t._v("使用脚手架生成的项目会有默认的"),e("code",[t._v("webpack")]),t._v("的很多配置，但是你打开项目并不能直接看到存在有"),e("code",[t._v("webpack")]),t._v("相关的配置文件，所以你会很迷惑，因为脚手架的目的是为了让开发更简单，而"),e("code",[t._v("webpack")]),t._v("实际上从零配置很复杂，所以脚手架将这样配置文件隐藏了起来，但是你可以从"),e("code",[t._v("package.json")]),t._v("文件中看到有一个"),e("code",[t._v("eject")]),t._v("的命令，我们可以通过跑这个命令来展示隐藏的这些配置文件：")]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[t._v("npm run eject\n")])])]),e("p",[t._v("然后会多出两个文件件，"),e("font",{attrs:{color:"#1E90FF"}},[t._v("config")]),t._v("和"),e("font",{attrs:{color:"#1E90FF"}},[t._v("scripts")]),t._v(",其中"),e("code",[t._v("config")]),t._v("包含了"),e("code",[t._v("webpack")]),t._v("的相关配置和部分文件，"),e("code",[t._v("scripts")]),t._v("中包含了一些启动的文件，此时此刻你在看"),e("code",[t._v("package.json")]),t._v("中的内容，就有很多的新增加的依赖，同时启动命令也变成了：")],1),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// package.json")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scripts"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"start"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node scripts/start.js"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),e("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node scripts/build.js"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),e("p",[t._v("很明显的就说明了问题，通过启动"),e("code",[t._v("scripts/start.js")]),t._v("文件来执行启动整个程序，通过"),e("code",[t._v("scripts/build.js")]),t._v("文件来执行打包整个项目。而对于"),e("code",[t._v("config")]),t._v("文件夹中的几个文件，最重要的就是这么几个：")]),t._v(" "),e("ul",[e("li",[e("font",{attrs:{color:"#3eaf7c"}},[t._v("webpack.config.js")]),t._v("；最核心的webpack配置文件")],1),t._v(" "),e("li",[e("font",{attrs:{color:"#3eaf7c"}},[t._v("webpackDevServer.config.js")]),t._v("：生产环境下"),e("code",[t._v("webpackDevServer")]),t._v("的核心配置")],1),t._v(" "),e("li",[e("font",{attrs:{color:"#3eaf7c"}},[t._v("path.js")]),t._v("：保存了所有打包路径和目录相关的变量和配置")],1),t._v(" "),e("li",[e("font",{attrs:{color:"#3eaf7c"}},[t._v("env.js")]),t._v("：初始化全局变量的文件")],1)]),t._v(" "),e("p",[t._v("所以其实对于"),e("code",[t._v("create-react-app")]),t._v("这个脚手架，我们学习它要做三个事情"),e("br"),t._v(" "),e("font",{attrs:{color:"#1E90FF"}},[e("strong",[t._v("① 搞清关系")])])],1),t._v(" "),e("p",[t._v("搞清楚配置文件之间的关系，帮助我们理解脚手架的配置，当我们自己从零开始做配置的时候也可以参照脚手架中的配置文件的设计和使用，"),e("code",[t._v("create-react-app")]),t._v("脚手架的配置文件如下：")]),t._v(" "),e("img",{attrs:{src:t.$withBase("/webpac_five_react_webpack.png"),alt:"create-react-app脚手架webpack配置"}}),t._v(" "),e("p",[e("font",{attrs:{color:"#1E90FF"}},[e("strong",[t._v("② 参考配置")])])],1),t._v(" "),e("p",[t._v("如果有不懂的配置和配置项，包括插件和"),e("code",[t._v("loader")]),t._v("的使用都可以借鉴"),e("code",[t._v("create-react-app")]),t._v("当中的配置,看看它使用了那些插件和"),e("code",[t._v("loader")]),t._v(",这些我们使用这些插件和"),e("code",[t._v("loader")]),t._v("会更保险。")]),t._v(" "),e("p",[e("font",{attrs:{color:"#1E90FF"}},[e("strong",[t._v("③ 学习配置")])])],1),t._v(" "),e("p",[t._v("详细过一遍"),e("code",[t._v("webpack.config.js")]),t._v("和"),e("code",[t._v("webpackDevServer.config.js")]),t._v("的配置，学习一些没有见过的配置，和明白它书写的配置的含义，加深对"),e("code",[t._v("webpack")]),t._v("的理解。如果后续有时间，我会将它的配置加以注释，在这里列举出来")]),t._v(" "),e("h2",{attrs:{id:"vue-cli"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#vue-cli","aria-hidden":"true"}},[t._v("#")]),t._v(" VUE-Cli")]),t._v(" "),e("p",[t._v("安装脚手架工具，我们可以通过下面的命令去安装，然后去通过教授架创建一个项目")]),t._v(" "),e("div",{staticClass:"language-javascript extra-class"},[e("pre",{pre:!0,attrs:{class:"language-javascript"}},[e("code",[e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 安装脚手架")]),t._v("\nnpm install "),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("g @vue"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("cli\n"),e("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建项目")]),t._v("\nvue create my"),e("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("app \n")])])]),e("p",[t._v("基本上项目的结构和通过"),e("code",[t._v("create-react-app")]),t._v("脚手架生成的项目是一样的，都会隐藏关于"),e("code",[t._v("webpack")]),t._v("的配置，这都是对小白很好的对待，不会"),e("code",[t._v("webpack")]),t._v("我就不会将配置暴露给你，"),e("font",{attrs:{color:"#DD1144"}},[t._v("但是vue的脚手架并没有能暴露webpack配置的命令，它给了一个vue.config.js的文件配置来让你间接配置webpack")])],1),t._v(" "),e("p",[t._v("所以你如果是通过"),e("code",[t._v("vue-cli")]),t._v("创建的项目，基本上要通过自己创建"),e("code",[t._v("vue.config.js")]),t._v("来做一些配置。好在这些配置参数和说明在"),e("a",{attrs:{href:"https://cli.vuejs.org/zh/config/#vue-config-js",target:"_blank",rel:"noopener noreferrer"}},[t._v("官网"),e("OutboundLink")],1),t._v("都有很清晰的中文说明。"),e("font",{attrs:{color:"#1E90FF"}},[t._v("虽然表面上vue的脚手架工具提供一套新的打包配置，但是实际上都被转化成为底层webpack的配置")]),t._v("，从这些也能侧面反映出"),e("code",[t._v("vue")]),t._v("和"),e("code",[t._v("react")]),t._v("的一些区别，"),e("font",{attrs:{color:"#DD1144"}},[t._v("react更灵活，vue更简单，无论从本质或者使用来看都是如此")]),t._v("。")],1),t._v(" "),e("p",[t._v("到这里基本上，我们还要说一个更重要的东西，就是"),e("font",{attrs:{color:"#1E90FF"}},[t._v("怎么使用webpack才是正确的")]),t._v("。而这个问题只有一个正确的解答，就是"),e("font",{attrs:{color:"#DD1144"}},[t._v("熟读官网")]),t._v("，因为配置参数你永远不能全部记住，配置设计也永远在随着版本的更新在变化，只有多读官网，才能用好"),e("code",[t._v("webpack")]),t._v("，而且因为官网书写有很多类似的套路，明白这些套路，对于新的配置和说明我们也很快能明白它说的是什么意思。我们下面就要说怎么查官网：")],1),t._v(" "),e("ul",[e("li",[e("font",{attrs:{color:"#3eaf7c"}},[t._v("指南")]),t._v("：比如代码分割或者过滤你忘记了查这个模块")],1),t._v(" "),e("li",[e("font",{attrs:{color:"#3eaf7c"}},[t._v("配置")]),t._v("：看到别人用的一些配置自己不知道，可以查阅配置去看")],1),t._v(" "),e("li",[e("font",{attrs:{color:"#3eaf7c"}},[t._v("概念")]),t._v("：这个是要永远记住的")],1),t._v(" "),e("li",[e("font",{attrs:{color:"#3eaf7c"}},[t._v("插件")]),t._v("：要用插件的时候在这里查")],1),t._v(" "),e("li",[e("font",{attrs:{color:"#3eaf7c"}},[t._v("loader")]),t._v("：要用"),e("code",[t._v("loader")]),t._v("的时候在这里查")],1),t._v(" "),e("li",[e("font",{attrs:{color:"#3eaf7c"}},[t._v("API")]),t._v("：提供你要自己编写插件或者"),e("code",[t._v("loader")]),t._v("以及一些"),e("code",[t._v("webpack")]),t._v("内部配置的时候可以在这里查阅")],1)])])},[],!1,null,null,null);a.default=v.exports}}]);