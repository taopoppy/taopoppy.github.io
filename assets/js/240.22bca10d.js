(window.webpackJsonp=window.webpackJsonp||[]).push([[240],{424:function(t,s,a){"use strict";a.r(s);var r=a(0),e=Object(r.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"监控服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#监控服务","aria-hidden":"true"}},[t._v("#")]),t._v(" 监控服务")]),t._v(" "),a("h2",{attrs:{id:"node-exporter"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#node-exporter","aria-hidden":"true"}},[t._v("#")]),t._v(" node_exporter")]),t._v(" "),a("h3",{attrs:{id:"_1-node-exporter安装和使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-node-exporter安装和使用","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. node_exporter安装和使用")]),t._v(" "),a("p",[t._v("我们如果要监控一个服务器的运行状态，我们可以在那个主机上面下载"),a("code",[t._v("node_exporter")]),t._v("这个组件，"),a("font",{attrs:{color:"#1E90FF"}},[t._v("这个组件就是收集本机的一些cpu、网络、内存等数据信息")]),t._v("， 我们这里使用的二级制安装包是："),a("code",[t._v("node_exporter-0.16.0.linux-amd64.tar.gz")]),t._v(",如果你需要其他的版本，你可以到"),a("a",{attrs:{href:"https://prometheus.io/download/",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://prometheus.io/download/"),a("OutboundLink")],1),t._v("这个网址下载：")],1),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 加压文件")]),t._v("\n# tar xf node_exporter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.16")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("linux"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("amd64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gz "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("C "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 重命名")]),t._v("\n# mv "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("node_exporter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.16")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("linux"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("amd64"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("node_exporter\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 进入node_exporter查看文件")]),t._v("\n# cd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("node_exporter\n# ls\n")])])]),a("p",[t._v("所以我们能看到整个文件夹中有下面这些文件：LICENSE  "),a("font",{attrs:{color:"#3eaf7c"}},[t._v("node_exporter")]),t._v("\t  NOTICE")],1),t._v(" "),a("p",[t._v("其中绿色的文件"),a("font",{attrs:{color:"#3eaf7c"}},[t._v("node_exporter")]),t._v("就是一个启动命令，可以直接使用这个命令启动：")],1),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用nohup启动命令")]),t._v("\n# nohup "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("node_exporter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("node_exporter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n")])])]),a("p",[t._v("启动的结果我们在下面可以看到：")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@imooc node_exporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# nohup "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("node_exporter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("node_exporter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16113")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@imooc node_exporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# nohup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ignoring input and appending output to ‘nohup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out’\n")])])]),a("p",[t._v("特别注意：")]),t._v(" "),a("ul",[a("li",[t._v("如果启动异常，你可以到"),a("code",[t._v("nohup.out")]),t._v("重查看详情，在当前目录输入："),a("code",[t._v("tail -fn 50 nohup.out")]),t._v("这个命令即可显示。")]),t._v(" "),a("li",[a("font",{attrs:{color:"#DD1144"}},[t._v("如果把启动node_exporter的终端给关闭，那么进程也会随之关闭，nohup就是帮助你解决这个问题，它能让当前命令启动的主程序永久执行")]),t._v("。")],1)]),t._v(" "),a("p",[t._v("当然为了确认启动的正确性，我们还是要查询一起端口的启动启动状态：")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 查看端口")]),t._v("\n# lsof "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("i"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9100")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 或者下面的命令")]),t._v("\n# ss "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("naltp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9100")]),t._v("\n")])])]),a("p",[t._v("我们的检查结果如下：")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@imooc node_exporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# ss "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("naltp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9100")]),t._v("\nLISTEN     "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9100")]),t._v("                  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("                   users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node_exporter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("pid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16113")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("fd"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("这样之后，我们就能使用"),a("code",[t._v("http://被监控端IP:9100/metrics")]),t._v("来查看到"),a("code",[t._v("node_exporter")]),t._v("组件对自己所在的服务器收集到的当前本机的一些运行信息；")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/prometheus_introduce_four.png"),alt:"node_exporter访问信息"}}),t._v(" "),a("h3",{attrs:{id:"_2-prometheus配置监控"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-prometheus配置监控","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. prometheus配置监控")]),t._v(" "),a("p",[t._v("现在在被监控的服务器主机上有了"),a("code",[t._v("node_exporter")]),t._v("组件，但是这个时候还和"),a("code",[t._v("prometheus")]),t._v("没有任何关系，"),a("font",{attrs:{color:"#1E90FF"}},[t._v("我们需要让普罗米修斯监控可以拉取到node_exporter收集到的其所在主机的信息")]),t._v("，首先我们要到"),a("code",[t._v("prometheus")]),t._v("文件下打开文件：")],1),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("# vim "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("prometheus"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("prometheus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yml\n")])])]),a("p",[t._v("然后我们在最后三行添加"),a("code",[t._v("node_exporter")]),t._v("组件所在的主机信息，端口等等：")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("# my global config\nglobal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  scrape_interval"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("s # Set the scrape interval to every "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(" seconds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" Default is every "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" minute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  evaluation_interval"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("s # Evaluate rules every "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(" seconds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" The "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" is every "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" minute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  # scrape_timeout is set to the global "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\n# Alertmanager configuration\nalerting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  alertmanagers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" static_configs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" targets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      # "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" alertmanager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9093")]),t._v("\n\n# Load rules once and periodically evaluate them according to the global "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'evaluation_interval'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\nrule_files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  # "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"first_rules.yml"')]),t._v("\n  # "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"second_rules.yml"')]),t._v("\n\n# A scrape configuration containing exactly one endpoint to scrape"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n# Here it"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s Prometheus itself.\nscrape_configs:\n  # The job name is added as a label `job=<job_name>` to any timeseries scraped from this config.\n  - job_name: '")]),t._v("prometheus"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\n\n    # metrics_path defaults to '")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("metrics"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\n    # scheme defaults to '")]),t._v("http"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.\n\n    static_configs:\n    - targets: ['")]),t._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9090")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("']\n  # 在这里添加新的节点\n  - job_name: '")]),t._v("agent"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\n    static_configs:\n    - targets: ['")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("192.168")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".11")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".86")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9100")]),t._v("'"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("p",[t._v("当然上面这种配置是"),a("code",[t._v("node_exporter")]),t._v("所在服务器和"),a("code",[t._v("prometheus")]),t._v("服务所在机器不是同一个机器，如果是同一个机器，可以直接在"),a("code",[t._v("job_name")]),t._v("为"),a("code",[t._v("prometheus")]),t._v("的配置项"),a("code",[t._v("targets")]),t._v("的数组当中添加新的即可，比如："),a("font",{attrs:{color:"#1E90FF"}},[t._v("- targets: ['localhost:9090','localhost:9100']")]),t._v("，修改好"),a("code",[t._v("prometheus")]),t._v("的配置文件，我们必须要重新启动整个"),a("code",[t._v("prometheus")]),t._v("的服务：")],1),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 强制杀掉进程")]),t._v("\n# pkill prometheus\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 检查是否真的杀掉")]),t._v("\n# ss "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("naltp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9090")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动prometheus")]),t._v("\n# "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("prometheus"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("prometheus "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("file"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/usr/local/prometheus/prometheus.yml"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 再次检查端口")]),t._v("\n# ss "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("naltp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9090")]),t._v("\n")])])]),a("p",[t._v("整个操作过程如下：")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@imooc prometheus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# pkill prometheus\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@imooc prometheus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# level"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("warn ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12.023292322")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("406")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Received SIGTERM, exiting gracefully..."')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12.02334747")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("431")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Stopping scrape discovery manager..."')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12.023360128")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("445")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Stopping notify discovery manager..."')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12.023368503")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("467")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Stopping scrape manager..."')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12.02339315")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("427")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Scrape discovery manager stopped"')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12.023408176")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("441")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Notify discovery manager stopped"')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12.023430124")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("manager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("657")]),t._v(" component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rule manager"')]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Stopping rule manager..."')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12.02344093")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("manager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("663")]),t._v(" component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"rule manager"')]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Rule manager stopped"')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12.023490909")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("461")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Scrape manager stopped"')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12.052257928")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("notifier"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("512")]),t._v(" component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("notifier msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Stopping notification manager..."')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12.052314238")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("616")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Notifier manager stopped"')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("13")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("12.052558492")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("628")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"See you next time!"')]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@imooc prometheus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# ss "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("naltp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9090")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@imooc prometheus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("prometheus"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("prometheus "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("file"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/usr/local/prometheus/prometheus.yml"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16178")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@imooc prometheus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# level"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("08")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01.651668652")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("244")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Starting Prometheus"')]),t._v(" version"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"(version=2.5.0, branch=HEAD, revision=67dc912ac8b24f94a1fc478f352d25179c94ab9b)"')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("08")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01.651825552")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("245")]),t._v(" build_context"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"(go=go1.11.1, user=root@578ab108d0b9, date=20181106-11:40:44)"')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("08")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01.651857609")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("246")]),t._v(" host_details"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"(Linux 3.10.0-1062.el7.x86_64 #1 SMP Wed Aug 7 18:08:02 UTC 2019 x86_64 imooc (none))"')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("08")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01.651886856")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("247")]),t._v(" fd_limits"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"(soft=1024, hard=4096)"')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("08")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01.651905497")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("248")]),t._v(" vm_limits"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"(soft=unlimited, hard=unlimited)"')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("08")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01.653446253")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("562")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Starting TSDB ..."')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("08")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01.654307905")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("repair"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("35")]),t._v(" component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tsdb msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"found healthy block"')]),t._v(" mint"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1582740000000")]),t._v(" maxt"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1582747200000")]),t._v(" ulid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01E21")]),t._v("MSD58CA85TTZ91HWDXSM9\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("08")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01.654411038")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("repair"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("35")]),t._v(" component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tsdb msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"found healthy block"')]),t._v(" mint"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1582747200000")]),t._v(" maxt"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1582754400000")]),t._v(" ulid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01E21")]),t._v("VN4D5EY4R1AVSSGQ0DXDE\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("08")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01.654547065")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("repair"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("35")]),t._v(" component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tsdb msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"found healthy block"')]),t._v(" mint"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1582696800000")]),t._v(" maxt"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1582740000000")]),t._v(" ulid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01E21")]),t._v("VN4F02FTRNHE2RMY3QDRX\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("08")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01.654599182")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("repair"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("35")]),t._v(" component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("tsdb msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"found healthy block"')]),t._v(" mint"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1582754400000")]),t._v(" maxt"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1582761600000")]),t._v(" ulid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01E222")]),t._v("GVN6AJ2RGEDE0PVRBDK2\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("08")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("01.673746419")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("web"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("399")]),t._v(" component"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("web msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Start listening for connections"')]),t._v(" address"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.0")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9090")]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("08")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02.579805123")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("572")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"TSDB started"')]),t._v("\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("08")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02.580031313")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("632")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Loading configuration file"')]),t._v(" filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("prometheus"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("prometheus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yml\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("08")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02.705625351")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("658")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Completed loading of configuration file"')]),t._v(" filename"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("prometheus"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("prometheus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yml\nlevel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("info ts"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2020")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("27")]),t._v("T02"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("08")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("02.705664376")]),t._v("Z caller"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("main"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("go")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("531")]),t._v(" msg"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"Server is ready to receive web requests."')]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@imooc prometheus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# ss "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("naltp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9090")]),t._v("\nLISTEN     "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9090")]),t._v("                  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("                   users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"prometheus"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("pid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16178")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("fd"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("此时我们再次去"),a("code",[t._v("prometheus")]),t._v("服务的"),a("code",[t._v("web")]),t._v("端口查看是否监控到"),a("code",[t._v("node_exporter")]),t._v("组价收集的数据：")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/prometheus_introduce_five.png"),alt:"prometheus监控到node_exporter的数据"}}),t._v(" "),a("h2",{attrs:{id:"mysqld-exporter监控mysql"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#mysqld-exporter监控mysql","aria-hidden":"true"}},[t._v("#")]),t._v(" mysqld_exporter监控mysql")]),t._v(" "),a("h3",{attrs:{id:"_1-mysqld-exporter的安装和使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-mysqld-exporter的安装和使用","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. mysqld_exporter的安装和使用")]),t._v(" "),a("p",[a("font",{attrs:{color:"#1E90FF"}},[a("strong",[t._v("① 下载和安装mysqld_exporter")])])],1),t._v(" "),a("p",[t._v("除了主机的一些信息，我们还想监控一些重点的服务，比如"),a("code",[t._v("mysql")]),t._v("，我们就需要在有"),a("code",[t._v("mysql")]),t._v("服务的主机上安装一个"),a("code",[t._v("mysqld_exporter")]),t._v("的组件收集"),a("code",[t._v("mysql")]),t._v("的运行信息。我们这里使用的二进制文件是："),a("code",[t._v("mysqld_exporter-0.11.0.linux-amd64.tar.gz")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 加压文件")]),t._v("\n# tar xf mysqld_exporter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.11")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("linux"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("amd64"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("tar"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("gz "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("C "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 重命名")]),t._v("\n# mv "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysqld_exporter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0.11")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("linux"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("amd64"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysqld_exporter\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 进入mysqld_exporter查看文件")]),t._v("\n# cd "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysqld_exporter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("\n# ls\n")])])]),a("p",[t._v("所以我们能看到整个文件夹中有下面这些文件：LICENSE "),a("font",{attrs:{color:"#3eaf7c"}},[t._v("mysqld_exporter")]),t._v(" NOTICE")],1),t._v(" "),a("p",[a("font",{attrs:{color:"#1E90FF"}},[a("strong",[t._v("② 配置mysql权限")])])],1),t._v(" "),a("p",[t._v("然后我们登陆"),a("code",[t._v("mysql")]),t._v("，然后给"),a("code",[t._v("mysqld_exporter")]),t._v("给予查询和复制的权限：")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建用户：")]),t._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" create user "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mysql_monitor'")]),t._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'localhost'")]),t._v(" identified by "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123456'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 赋予权限：")]),t._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" grant "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("replication client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("process on "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" to "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mysql_monitor'")]),t._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'localhost'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 权限生效")]),t._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" flush privileges"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 退出")]),t._v("\nmysql"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" exit"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),a("p",[t._v("关于数据库的知识我们将两点：")]),t._v(" "),a("ul",[a("li",[a("font",{attrs:{color:"#1E90FF"}},[t._v("如果是比较新一点的版本的mysql，创建用户和赋予权限是要分开的，旧一点的数据库可以不分开的")]),t._v("，你可以直接使用下面的"),a("code",[t._v("sql")]),t._v(":"),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("grant "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("select")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("replication client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("process ON "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v(" to "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'mysql_monitor'")]),t._v("@"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'localhost'")]),t._v(" identified by "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'123456'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])],1),t._v(" "),a("li",[a("font",{attrs:{color:"#1E90FF"}},[t._v("经常你会看到在赋予权限的后面会有with grant option,这个是在修改权限的时候要加上，我们这里是初次赋予权限，就不用添加这个几个单词")]),t._v("。")],1)]),t._v(" "),a("p",[t._v("然后我们要特别注意一个问题："),a("font",{attrs:{color:"#DD1144"}},[t._v("prometheus服务器找mysqld_exporter，mysqld_exporter再去找mysql服务，所在在赋予权限中的语句中localhost指的是mysqld_exporter的IP")])],1),t._v(" "),a("p",[a("font",{attrs:{color:"#1E90FF"}},[a("strong",[t._v("③ 配置mysqld_exporter")])])],1),t._v(" "),a("p",[t._v("最后我们要在"),a("code",[t._v("mysqld_exporter")]),t._v("组件中配置"),a("code",[t._v("mysql")]),t._v("信息，我们需要在"),a("code",[t._v("/usr/local/mysqld_exporter")]),t._v("文件夹下创建一个"),a("code",[t._v(".my.cnf")]),t._v("的文件，写入下面的内容，表示"),a("code",[t._v("mysqld_exporter")]),t._v("要通过这个用户和密码去"),a("code",[t._v("mysql")]),t._v("中获取信息：")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("client"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\nuser"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v("mysql_monitor\npassword"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),t._v("\n")])])]),a("p",[t._v("我们可以直接使用下面的命令来创建并且编辑：")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("# vim "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysqld_exporter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("my"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cnf\n")])])]),a("p",[a("font",{attrs:{color:"#1E90FF"}},[a("strong",[t._v("④ 启动mysqld_exporter")])])],1),t._v(" "),a("p",[t._v("配置好了文件之后，我们就可以直接启动"),a("code",[t._v("mysqld_exporter")]),t._v("组件了：")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动mysqld_exporter")]),t._v("\n# nohup "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysqld_exporter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysqld_exporter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("my"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cnf"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysqld_exporter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("my"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cnf "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 检查端口")]),t._v("\n# ss "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("naltp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v("grep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9104")]),t._v("\n")])])]),a("p",[t._v("具体操作如下：")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@imooc mysqld_exporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# nohup "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysqld_exporter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysqld_exporter "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("my"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("cnf"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("mysqld_exporter"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("my"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("cnf "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17348")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@imooc mysqld_exporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# nohup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ignoring input and appending output to ‘nohup"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("out’\n\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@imooc mysqld_exporter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("# ss "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("naltp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9104")]),t._v("\nLISTEN     "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("0")]),t._v("      "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),t._v("       "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9104")]),t._v("                  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("*")]),t._v("                   users"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mysqld_exporter"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("pid"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("17348")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("fd"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("h3",{attrs:{id:"_2-prometheus配置监控-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-prometheus配置监控-2","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. prometheus配置监控")]),t._v(" "),a("p",[t._v("和之前一样，我们需要配置一下信息，然后重启"),a("code",[t._v("prometheus")]),t._v("服务：")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 编辑prometheus.yml配置文件")]),t._v("\n# vim "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("prometheus"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("prometheus"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("yml\n")])])]),a("p",[t._v("修改的"),a("code",[t._v("prometheus.yml")]),t._v("文件内容如下：")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("# my global config\nglobal"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  scrape_interval"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("s # Set the scrape interval to every "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(" seconds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" Default is every "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" minute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  evaluation_interval"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v("s # Evaluate rules every "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("15")]),t._v(" seconds"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v(" The "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" is every "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v(" minute"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n  # scrape_timeout is set to the global "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),t._v("s"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\n\n# Alertmanager configuration\nalerting"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  alertmanagers"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" static_configs"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" targets"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      # "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" alertmanager"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9093")]),t._v("\n\n# Load rules once and periodically evaluate them according to the global "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'evaluation_interval'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("\nrule_files"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  # "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"first_rules.yml"')]),t._v("\n  # "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"second_rules.yml"')]),t._v("\n\n# A scrape configuration containing exactly one endpoint to scrape"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n# Here it"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'s Prometheus itself.\nscrape_configs:\n  # The job name is added as a label `job=<job_name>` to any timeseries scraped from this config.\n  - job_name: '")]),t._v("prometheus"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\n\n    # metrics_path defaults to '")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("metrics"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'\n    # scheme defaults to '")]),t._v("http"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.\n\n    static_configs:\n    - targets: ['")]),t._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9090")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("','")]),t._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9100")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("','")]),t._v("localhost"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9104")]),t._v("'"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n")])])]),a("p",[t._v("修改完配置之后，我们重启服务：")]),t._v(" "),a("div",{staticClass:"language-go extra-class"},[a("pre",{pre:!0,attrs:{class:"language-go"}},[a("code",[t._v("# pkill prometheus\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 检查是否真的杀掉")]),t._v("\n# ss "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("naltp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9090")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动prometheus")]),t._v("\n# "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("usr"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("local"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("prometheus"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("prometheus "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("--")]),t._v("config"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("file"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"/usr/local/prometheus/prometheus.yml"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 再次检查端口")]),t._v("\n# ss "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("naltp "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("|")]),t._v(" grep "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("9090")]),t._v("\n")])])]),a("p",[t._v("然后我们重新回到"),a("code",[t._v("prometheus")]),t._v("服务的"),a("code",[t._v("web")]),t._v("端口看一下是否通过"),a("code",[t._v("mysqld_exporter")]),t._v("的9104端口拿到了"),a("code",[t._v("mysqld_exporter")]),t._v("收集的关于"),a("code",[t._v("mysql")]),t._v("运行的一些信息：")]),t._v(" "),a("img",{attrs:{src:t.$withBase("/prometheus_introduce_six.png"),alt:"prometheus服务"}}),t._v(" "),a("p",[a("strong",[t._v("参考资料")])]),t._v(" "),a("ol",[a("li",[a("a",{attrs:{href:"https://www.bilibili.com/video/av77812341?p=8",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装node_exporter组件监控Linux主机"),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://www.bilibili.com/video/av77812341?p=7",target:"_blank",rel:"noopener noreferrer"}},[t._v("安装mysqld_exporter组件监控Mysql服务"),a("OutboundLink")],1)])])])},[],!1,null,null,null);s.default=e.exports}}]);