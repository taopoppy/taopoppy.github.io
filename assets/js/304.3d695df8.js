(window.webpackJsonp=window.webpackJsonp||[]).push([[304],{491:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"项目搭建流程"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目搭建流程","aria-hidden":"true"}},[t._v("#")]),t._v(" 项目搭建流程")]),t._v(" "),a("h2",{attrs:{id:"项目概述"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#项目概述","aria-hidden":"true"}},[t._v("#")]),t._v(" 项目概述")]),t._v(" "),a("h3",{attrs:{id:"_1-项目内容"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-项目内容","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. 项目内容")]),t._v(" "),a("p",[t._v("在学习了一系列的服务端渲染的原理之后，我们希望通过实践来检验我们的学习效果，但是通常我们在工作当中是不可能手动去搭建一个"),a("code",[t._v("SSR")]),t._v("框架的，我们需要借助现有的好的框架来快速的开发项目，对于"),a("code",[t._v("react")]),t._v("服务端渲染毫无疑问要学习的就是"),a("font",{attrs:{color:"#DD1144"}},[t._v("next.js")]),t._v("这个同构框架。")],1),t._v(" "),a("p",[t._v("学习完实战的内容，你会学习到：")]),t._v(" "),a("ul",[a("li",[a("font",{attrs:{color:"#1E90FF"}},[t._v("非常适合展示型的项目的next.js框架")])],1),t._v(" "),a("li",[a("font",{attrs:{color:"#DD1144"}},[t._v("web界最广泛使用的第三方OAUuth授权体系")])],1),t._v(" "),a("li",[a("font",{attrs:{color:"#DD1144"}},[t._v("React的新型开发模式React Hooks")])],1),t._v(" "),a("li",[a("font",{attrs:{color:"#DD1144"}},[t._v("内存数据库Redis和Koa")])],1)]),t._v(" "),a("p",[t._v("对于"),a("code",[t._v("next.js")]),t._v("这个同构框架有什么优势呢？")]),t._v(" "),a("ul",[a("li",[a("font",{attrs:{color:"#1E90FF"}},[t._v("完善的React项目架构，搭建轻松")])],1),t._v(" "),a("li",[a("font",{attrs:{color:"#1E90FF"}},[t._v("自带数据同步策略，解决同构项目最大的难点")])],1),t._v(" "),a("li",[a("font",{attrs:{color:"#1E90FF"}},[t._v("丰富的插件帮助我们增加各种功能")])],1),t._v(" "),a("li",[a("font",{attrs:{color:"#1E90FF"}},[t._v("灵活的配置根据你的需求来自定义")])],1)]),t._v(" "),a("p",[t._v("我们在整个项目的开发当中都将围绕下面这个流程图来一步一步前进，所以当整个项目开发完完毕，你就能深入的理解这个流程：\n"),a("img",{attrs:{src:t.$withBase("/react_nextjs_liucheng.png"),alt:"next流程图"}})]),t._v(" "),a("h3",{attrs:{id:"_2-版本号"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-版本号","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. 版本号")]),t._v(" "),a("p",[t._v("前端发展飞速，我们使用的这些包的版本号也在飞速变化，关于一个包的版本号"),a("code",[t._v("^aa.bb.cc")]),t._v("，我们需要知道：")]),t._v(" "),a("ul",[a("li",[a("p",[a("font",{attrs:{color:"#1E90FF"}},[t._v("^表示自动在大版本的范围内更新小版本，比如在package.json当中写的^1.0.1，而npm install的时候发现已经有1.0.2,就会自动下载1.0.2，但是npm install的时候发现已经有2.0.1的时候，它是不会去自动更新的，因为大版本之间无法兼容")])],1)]),t._v(" "),a("li",[a("p",[a("font",{attrs:{color:"#1E90FF"}},[t._v("aa是大版本号，一般只有breaking changes的时候才会更新")])],1)]),t._v(" "),a("li",[a("p",[a("font",{attrs:{color:"#1E90FF"}},[t._v("bb是一般修复比较大的bug")])],1)]),t._v(" "),a("li",[a("p",[a("font",{attrs:{color:"#1E90FF"}},[t._v("cc则是一些细微的修改")])],1)])]),t._v(" "),a("h2",{attrs:{id:"nextjs和koa"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nextjs和koa","aria-hidden":"true"}},[t._v("#")]),t._v(" nextjs和Koa")]),t._v(" "),a("h3",{attrs:{id:"_1-创建next-js项目"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-创建next-js项目","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. 创建next.js项目")]),t._v(" "),a("p",[t._v("创建一个"),a("code",[t._v("next.js")]),t._v("项目有两种方式，"),a("font",{attrs:{color:"#1E90FF"}},[t._v("手动创建")]),t._v("和"),a("font",{attrs:{color:"#1E90FF"}},[t._v("脚手架create-next-app创建")])],1),t._v(" "),a("p",[a("font",{attrs:{color:"#1E90FF"}},[a("strong",[t._v("① 手动创建")])])],1),t._v(" "),a("p",[t._v("我们先来手动创建：创建一个"),a("code",[t._v("nextjs-project")]),t._v("的文件夹，然后"),a("code",[t._v("npm init")]),t._v("，接着我们下载依赖：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("yarn add react@"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16.8")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".3")]),t._v(" react"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("dom@"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("16.8")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".3")]),t._v(" next@"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8.0")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".3")]),t._v("\n")])])]),a("p",[t._v("然后我们修改"),a("code",[t._v("package.json")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// package.json")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"test"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"echo \\"Error: no test specified\\" && exit 1"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"next"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 开发环境下自动编译，自动监听并生成页面，并且有hot module等webpack的功能")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"build"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"next build"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 部署生产环境")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"start"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"next start"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 启动正式服务")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("现在在开发环境就可以通过"),a("code",[t._v("yarn dev")]),t._v("来启动项目,但是启动后会是404的页面，"),a("font",{attrs:{color:"#1E90FF"}},[t._v("我们接着创建pages/index.js")]),t._v(":")],1),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// pages/index.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("span"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("span"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("ul",[a("li",[a("font",{attrs:{color:"#DD1144"}},[t._v("在nextjs当中，所有的页面都会放在pages这个文件夹下面，这个是nextjs规定的，pages下面每个文件都对应的是一个页面")])],1),t._v(" "),a("li",[a("font",{attrs:{color:"#DD1144"}},[t._v("而且我们不需要在书写jsx的地方引入React，这个nextjs在全局已经做过处理了")])],1)]),t._v(" "),a("p",[a("font",{attrs:{color:"#1E90FF"}},[a("strong",[t._v("② 脚手架创建")])])],1),t._v(" "),a("p",[t._v("安装脚手架，利用脚手架创建项目：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 下载脚手架")]),t._v("\nnpm install "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("g create"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("next"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("app\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建项目")]),t._v("\nnpx create"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("next"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("app nextjs"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("project\n")])])]),a("h3",{attrs:{id:"_2-next作为koa中间件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-next作为koa中间件","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. next作为koa中间件")]),t._v(" "),a("p",[a("font",{attrs:{color:"#1E90FF"}},[a("strong",[t._v("① nextjs自身带有服务器，只处理ssr渲染")])])],1),t._v(" "),a("p",[a("font",{attrs:{color:"#DD1144"}},[t._v("使用 yarn dev 启动 nextjs 项目会自动启动一个 node 的服务，但是这个服务是只能处理把 pages 当中的文件编译成页面，然后根据路由返回对应的内容，也就是说在 pages 文件夹中的所有 js 文件都需要通过 react 渲染成为 html 字符串返回给浏览器，整个过程是 nextjs 帮助我们完成的。")])],1),t._v(" "),a("p",[a("font",{attrs:{color:"#1E90FF"}},[a("strong",[t._v("② 处理HTTP请求，返回响应")])])],1),t._v(" "),a("p",[a("font",{attrs:{color:"#DD1144"}},[t._v("nextjs自带的服务器只处理页面请求和静态文件请求，诸如数据请求这种不属于nextjs要干的事情，所以我们需要koa来创建一个服务器来处理"),a("font",{attrs:{color:"#9400D3"}},[t._v("数据接口")]),t._v("、"),a("font",{attrs:{color:"#9400D3"}},[t._v("数据库连接")]),t._v("、"),a("font",{attrs:{color:"#9400D3"}},[t._v("session状态处理")]),t._v("，这些都是nextjs自带服务器干不了的事，我们也无法修改它的代码")],1)],1),t._v(" "),a("p",[a("font",{attrs:{color:"#DD1144"}},[t._v("所以我们需要将nextjs作为koa的一个中间件使用，如果是页面请求和静态文件请求，我们沿着中间件进入nextjs服务器，如果是其他的就进入koa自己的服务器处理请求")])],1),t._v(" "),a("p",[t._v("我们首先下载依赖：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("yarn add koa@"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("2.7")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),t._v(" koa"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("router@"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("7.4")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),t._v(" koa"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("session@"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("5.10")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".1")]),t._v("\n")])])]),a("p",[t._v("然后在根目录下面去创建"),a("code",[t._v("server.js")]),t._v(",这个就是我们同时启动"),a("code",[t._v("koa")]),t._v("和"),a("code",[t._v("nextjs")]),t._v("的文件")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// server.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Koa "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" next "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'next'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" dev "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" process"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("env"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token constant"}},[t._v("NODE_ENV")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'production'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" app "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" dev "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" handle "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" app"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRequestHandler")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 拿到nextjs服务中的handle来处理http请求的响应")]),t._v("\n\napp"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("prepare")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("then")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 等待pages下所有文件编译完成才启动nextjs服务和koa服务")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Koa")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\tserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// nextjs服务作为koa的中间件使用")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("handle")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("req"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("res"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t\tctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("respond "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("false")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\tserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"koa server listening on 3000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("此时我们使用"),a("code",[t._v("yarn dev")]),t._v("或者"),a("code",[t._v("npm run dev")]),t._v("就要启动的是"),a("code",[t._v("koa")]),t._v("的服务，所以我们的"),a("code",[t._v("package.json")]),t._v("中的命令就要改成：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// package.json")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"scripts"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"dev"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"node server.js"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("h3",{attrs:{id:"_3-koa的基本使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-koa的基本使用","aria-hidden":"true"}},[t._v("#")]),t._v(" 3. koa的基本使用")]),t._v(" "),a("p",[a("code",[t._v("koa")]),t._v("是一个轻量级的框架，并没有集成太多的功能，而是封装了请求从进入到响应的一个完成的流程，可以使得我们在其中使用很多的其他中间件来完成丰富的功能。")]),t._v(" "),a("p",[t._v("关于"),a("code",[t._v("koa")]),t._v("中间件的本质就是一个个方法，这些方法按照你书写中间件的顺序去执行，依次对请求和响应进行操作，"),a("font",{attrs:{color:"#1E90FF"}},[t._v("但是所有的中间件都是异步的，因为每个中间件都不会知道上一个和下一个中间件是异步还是同步，所以统一写为异步，使用async 和 await的方式去执行")])],1),t._v(" "),a("p",[t._v("我们来看一段最简单的"),a("code",[t._v("koa")]),t._v("的使用代码")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Koa "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Router "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'koa-router'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" server "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Koa")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建koa对象")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" router "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Router")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 创建router对象")]),t._v("\n\nserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v("\t"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("next")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 进入下一个中间件")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\nrouter"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'/test/:id'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("ctx")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" path "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("path "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求路径")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" method "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("method "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 请求方法")]),t._v("\n\tctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("body "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置返回json")]),t._v("\n\t\tsuccess"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\tid"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" ctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("id\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\tctx"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'Content-Type'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'application/json'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置返回头")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\nserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("use")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("router"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("routes")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 使用路由中间件")]),t._v("\n\nserver"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("listen")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3000")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\tconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"koa server listening on 3000"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("下面我们要说一下"),a("code",[t._v("res")]),t._v("、"),a("code",[t._v("req")]),t._v("、"),a("code",[t._v("response")]),t._v("、"),a("code",[t._v("request")]),t._v("之间的关系，"),a("font",{attrs:{color:"#1E90FF"}},[t._v("其实在Node原生当中的http的模块中使用的是res和req作为响应和请求的对象，那无论是koa还是express都是在原生node的http模块上进行封装和增强，所以这里的res和req都是原生Node当中的对象，response和request都是在res和req基础上的增强版")])],1),t._v(" "),a("p",[t._v("所以你可以看到在上一节"),a("code",[t._v("nextjs")]),t._v("作为"),a("code",[t._v("koa")]),t._v("的中间件使用的时候调用的是原始的"),a("code",[t._v("ctx.req")]),t._v("和"),a("code",[t._v("ctx.res")]),t._v("，因为"),a("code",[t._v("nextjs")]),t._v("并不是专为"),a("code",[t._v("koa")]),t._v("设计的，为了兼容所有"),a("code",[t._v("node")]),t._v("框架，"),a("code",[t._v("nextjs")]),t._v("必须使用原生的"),a("code",[t._v("node")]),t._v("中"),a("code",[t._v("http")]),t._v("模块当中的"),a("code",[t._v("req")]),t._v("和"),a("code",[t._v("res")]),t._v("。")]),t._v(" "),a("h2",{attrs:{id:"redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#redis","aria-hidden":"true"}},[t._v("#")]),t._v(" Redis")]),t._v(" "),a("h3",{attrs:{id:"_1-redis的安装和使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_1-redis的安装和使用","aria-hidden":"true"}},[t._v("#")]),t._v(" 1. Redis的安装和使用")]),t._v(" "),a("p",[t._v("首先"),a("code",[t._v("redis")]),t._v("必须要去"),a("code",[t._v("github")]),t._v("的网站上去下载，地址为"),a("a",{attrs:{href:"https://github.com/tporadowski/redis/releases",target:"_blank",rel:"noopener noreferrer"}},[t._v("https://github.com/tporadowski/redis/releases"),a("OutboundLink")],1),t._v("，有两种下载方式：")]),t._v(" "),a("p",[a("font",{attrs:{color:"#1E90FF"}},[a("strong",[t._v("① msi安装")])])],1),t._v(" "),a("p",[t._v("到"),a("code",[t._v("github")]),t._v("上下载"),a("code",[t._v("Redis-x64-5.0.9.msi")]),t._v("到本机上，解压到某个文件中，然后点击执行安装程序，都是傻瓜式的安装，"),a("font",{attrs:{color:"#1E90FF"}},[t._v("重要的是这种方式安装后，会把Redis作为window中的默认服务，每次开机就会自己启动")])],1),t._v(" "),a("p",[a("font",{attrs:{color:"#1E90FF"}},[t._v("另外通过msi安装方式，已经将命令添加到系统的环境变量中了，所以不需要进入到redis的安装目录，任意目录都能执行redis的命令")])],1),t._v(" "),a("p",[a("font",{attrs:{color:"#DD1144"}},[t._v("任意目录下面执行redis-cli就会进入127.0.0.1:6379,然后可以通过set和get命令去设置数据和获取数据")])],1),t._v(" "),a("p",[a("font",{attrs:{color:"#1E90FF"}},[a("strong",[t._v("② zip")])])],1),t._v(" "),a("p",[t._v("到"),a("code",[t._v("github")]),t._v("上去下载"),a("code",[t._v("Redis-x64-5.0.9.zip")]),t._v("，然后加压后将文件命名为"),a("code",[t._v("redis")]),t._v("，一般是放在"),a("code",[t._v("C:\\redis")]),t._v("下面，进入"),a("code",[t._v("C:\\redis")]),t._v("启动"),a("code",[t._v("redis")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("C:\\REDUS"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" redis-server.exe redis.windows.conf\n")])])]),a("p",[t._v("然后需要重新打开一个命令行进入"),a("code",[t._v("redis")]),t._v("的操作：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("C:\\redis"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" redis-cli.exe -h 127.0.0.1 -p 6379\n127.0.0.1:6379"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" myKey abc\nOK\n127.0.0.1:6379"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" get myKey\n"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"abc"')]),t._v("\n127.0.0.1:6379"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("关于"),a("code",[t._v("zip")]),t._v("方法，每次都需要自己这样启动"),a("code",[t._v("redis")]),t._v("服务，这种方法在"),a("a",{attrs:{href:"https://www.runoob.com/redis/redis-install.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("菜鸟教程"),a("OutboundLink")],1),t._v("中也能找到。")]),t._v(" "),a("h3",{attrs:{id:"_2-redis的基本使用"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_2-redis的基本使用","aria-hidden":"true"}},[t._v("#")]),t._v(" 2. Redis的基本使用")]),t._v(" "),a("p",[a("code",[t._v("redis")]),t._v("安装好是没有密码的，这并不是说"),a("code",[t._v("redis")]),t._v("就是不安全的，因为通常"),a("code",[t._v("redis")]),t._v("数据库是设置在内网中的，外网访问不到，但是我们也可以来设置密码。")]),t._v(" "),a("p",[t._v("我们打开"),a("code",[t._v("redis.windows.conf")]),t._v("文件，然后查找"),a("code",[t._v("requirepass")]),t._v("，可以看到有一行是这样：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// requirepass foobared")]),t._v("\n")])])]),a("p",[t._v("我们取消这行注释，并修改成为下面这样，这样就将密码修改成为了123456")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("requirepass "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123456")]),t._v("\n")])])]),a("p",[t._v("然后重启之后，我们比如"),a("code",[t._v("set")]),t._v("一个数据就会出现"),a("code",[t._v("NOAUTH Authentication required")]),t._v("这样的错误提示，我们必须使用密码登录：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("127.0.0.1:6379"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" b 111\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" NOAUTH Authentication required\n127.0.0.1:6379"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" auth 123456\nOK\n127.0.0.1:6379"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("set")]),t._v(" b 111\nOK\n")])])]),a("p",[t._v("关于"),a("code",[t._v("redis")]),t._v("我们设置和获取数据的命令只需要知道"),a("code",[t._v("set")]),t._v("和"),a("code",[t._v("get")]),t._v("，虽然"),a("code",[t._v("redis")]),t._v("只是一个"),a("code",[t._v("key:value")]),t._v("的数据库，但是"),a("code",[t._v("value")]),t._v("可以有各种各样的数据结构。当我们我们出了"),a("code",[t._v("set")]),t._v("和"),a("code",[t._v("get")]),t._v("我们还需要知道"),a("code",[t._v("setex")]),t._v("，这个命令可以给"),a("code",[t._v("key")]),t._v("设置一个过期时间：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("// 给key:value为name:taopoppy设置一个10秒的过期时间\n127.0.0.1:6379"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" setex name 10 taopoppy\n")])])]),a("p",[t._v("然后如果我们需要查找所有存在于"),a("code",[t._v("redis")]),t._v("当中的"),a("code",[t._v("key")]),t._v("并且删除某些"),a("code",[t._v("key")]),t._v(",我们可以：")]),t._v(" "),a("div",{staticClass:"language-bash extra-class"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[t._v("127.0.0.1:6379"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" keys *\n1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bs001"')]),t._v("\n2"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bs002"')]),t._v("\n127.0.0.1:6379"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" del bs001\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("integet"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" 1\n127.0.0.1:6379"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" keys *\n1"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"bs002"')]),t._v("\n")])])]),a("h3",{attrs:{id:"_3-node连接redis"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#_3-node连接redis","aria-hidden":"true"}},[t._v("#")]),t._v(" 3. Node连接Redis")]),t._v(" "),a("p",[t._v("安装"),a("code",[t._v("ioredis")]),t._v("这个包：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("yarn add ioredis@"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("4.6")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".2")]),t._v("\n")])])]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// nextjs-project\\test\\test-redis.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("async")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" Redis "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'ioredis'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" redis "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("Redis")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\tport"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'6379'")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// password:123456")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" redis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("set")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"c"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("123")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("           "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置key:value")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" redis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setex")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"d"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1234")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("     "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 设置有过期时间的key:value")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" keys "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" redis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("keys")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 取出所有key")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" value "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" redis"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("get")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"c"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 取出key为c的value")]),t._v("\n\n\tconsole"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("keys"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("value"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("test")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("可以看到的是，"),a("code",[t._v("ioredis")]),t._v("这个包基本上用法和我们在命令行当中的用法是一样的。")]),t._v(" "),a("h2",{attrs:{id:"nextjs继承antd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#nextjs继承antd","aria-hidden":"true"}},[t._v("#")]),t._v(" nextjs继承antd")]),t._v(" "),a("p",[t._v("首先安装"),a("code",[t._v("antd")]),t._v("有几个问题：")]),t._v(" "),a("p",[a("font",{attrs:{color:"#1E90FF"}},[a("strong",[t._v("① next.js默认不支持css文件")])])],1),t._v(" "),a("p",[a("font",{attrs:{color:"#1E90FF"}},[t._v("nextjs默认是不支持直接import css文件的，因为默认功能当中有个css-in-js的方案的，但是nextjs同时又提供了很多插件来帮助我们实现各种各样的功能，所以我们来看一下怎么使用")])],1),t._v(" "),a("p",[t._v("首先来安装"),a("code",[t._v("@zeit/next-css")])]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[t._v("yarn add @zeit"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("next"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("css@"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.0")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".1")]),t._v("\n")])])]),a("p",[t._v("这个包就是提供了"),a("code",[t._v("nextjs")]),t._v("使用"),a("code",[t._v("css")]),t._v("的一些配置，然后我们创建"),a("code",[t._v("next.config.js")]),t._v("文件：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// nextjs-project/next.config.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" withCss "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("require")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@zeit/next-css'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("typeof")]),t._v(" require "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!==")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'undefined'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\trequire"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("extensions"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'.css'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter"}},[t._v("file")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\nmodule"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("exports "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("withCss")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("实际上"),a("code",[t._v("withCss")]),t._v("就是"),a("code",[t._v("@zeit/next-css")]),t._v("这个包导出的配置，我们让整个配置直接成为"),a("code",[t._v("next.config.js")]),t._v("的配置，这样直接将使用"),a("code",[t._v("css")]),t._v("的能力接入到了"),a("code",[t._v("nextjs")]),t._v("当中,这个时候我们再创建一个"),a("code",[t._v("css")]),t._v("文件并引入到"),a("code",[t._v("index.js")]),t._v("当中测试一下：")]),t._v(" "),a("div",{staticClass:"language-css extra-class"},[a("pre",{pre:!0,attrs:{class:"language-css"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("/*nextjs-project/text.css*/")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token selector"}},[t._v("body")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token property"}},[t._v("color")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" aqua"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// nextjs-project/pages/index.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'../text.css'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("span"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("span"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("这样"),a("code",[t._v("css")]),t._v("文件就被正确引入并且生效了。")]),t._v(" "),a("p",[a("font",{attrs:{color:"#1E90FF"}},[a("strong",[t._v("② 如何分模块加载组件")])])],1),t._v(" "),a("p",[t._v("在"),a("code",[t._v("antd")]),t._v("旧一点的版本当中，需要使用"),a("code",[t._v("babel-plugin-import")]),t._v("来解决按需加载的问题，使用到"),a("code",[t._v("antd")]),t._v("中的什么组件就只会加载什么组件，不会将所有"),a("code",[t._v("antd")]),t._v("的代码全部打包进来：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 下载antd")]),t._v("\nyarn add antd@"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("3.13")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".6")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 下载babel-plugin-import")]),t._v("\nyarn add babel"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),t._v("plugin"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("-")]),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v("@"),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("1.11")]),a("span",{pre:!0,attrs:{class:"token number"}},[t._v(".0")]),t._v("\n")])])]),a("p",[t._v("然后创建"),a("code",[t._v("nextjs-project/.babelrc")]),t._v(":")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// nextjs-project/.babelrc")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"presets"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"next/babel"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 加入next当中的默认babel配置")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"plugins"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"import"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n\t\t\t\t"),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"libraryName"')]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"antd"')]),t._v("\n\t\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n\t\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n\t"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("这个配置之后，我们在代码当中使用"),a("code",[t._v("import { Button } from 'antd'")]),t._v(",那么"),a("code",[t._v("babel")]),t._v("在"),a("code",[t._v("webpack")]),t._v("打包之前会先将其转换成为"),a("code",[t._v("import Button from 'antd/lib/button'")]),t._v(",这样"),a("code",[t._v("webpack")]),t._v("打包就只会打包"),a("code",[t._v("antd/lib/button")]),t._v("当中的代码，而不会将"),a("code",[t._v("antd")]),t._v("所有的代码都打包进来。")]),t._v(" "),a("p",[t._v("然后我们直接去使用:")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// nextjs-project/pages/index.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" Button "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'antd'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("Button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("index"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("/")]),t._v("Button"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v("\n")])])]),a("p",[t._v("当然这样用是没有样式效果的，在"),a("code",[t._v("antd")]),t._v("官网上说还要全局引入"),a("code",[t._v("antd")]),t._v("的"),a("code",[t._v("css")]),t._v("样式，所以我们去创建"),a("code",[t._v("nextjs-project/pages/_app.js")]),t._v("：")]),t._v(" "),a("div",{staticClass:"language-javascript extra-class"},[a("pre",{pre:!0,attrs:{class:"language-javascript"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// nextjs-project/pages/_app.js")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" App "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'next/app'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'antd/dist/antd.css'")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 引入样式")]),t._v("\n\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("export")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("default")]),t._v(" App\n")])])]),a("p",[t._v("这个文件是覆盖"),a("code",[t._v("nextjs")]),t._v("默认的全局"),a("code",[t._v("app.js")]),t._v("文件的，这个我们下一章会再详细说。")])])},[],!1,null,null,null);s.default=e.exports}}]);